"use strict";(self["webpackChunkeasyadmin"]=self["webpackChunkeasyadmin"]||[]).push([[378],{658:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"user-container"},[t("div",{staticClass:"workspace"},[t("div",{staticClass:"main-content"},[t("div",{staticClass:"container"},[t("div",{staticClass:"container mt-3"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:e.isCreating},on:{click:e.createUser}},[e._v(" Erstellen ")]),t("h2",[e._v("Benutzerverwaltung")])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("table",{staticClass:"table table-bordered table-sm mt-5"},[e._m(0),e.isLoading?t("tbody",[e._m(1)]):e._e(),e.isLoading?e._e():t("tbody",[e.isCreating?t("tr",[t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),t("td"),t("td",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.user.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.user,"role",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"1"}},[e._v("User")]),t("option",{attrs:{value:"2"}},[e._v("Admin")])])]),t("td",[t("div",[t("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:e.isSaving},on:{click:function(t){return e.cancelCreate()}}},[t("i",{staticClass:"fa fa-times"})]),t("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:e.isSaving},on:{click:function(t){return e.addUser(e.user)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])])])]):e._e(),e._l(e.users,(function(s){return t("tr",{key:s.id},[t("td",[e.isEditMode(s)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.name,expression:"user.name"}],staticClass:"form-control",domProps:{value:s.name},on:{input:function(t){t.target.composing||e.$set(s,"name",t.target.value)}}}):t("span",[e._v(e._s(s.name))])]),t("td",[e.isEditMode(s)?t("input",{directives:[{name:"model",rawName:"v-model",value:s.email,expression:"user.email"}],staticClass:"form-control",domProps:{value:s.email},on:{input:function(t){t.target.composing||e.$set(s,"email",t.target.value)}}}):t("a",{attrs:{href:"mailto:"+s.email}},[e._v(e._s(s.email))])]),t("td",[e._v(" "+e._s(e._f("date")(s.email_verified_at))+" ")]),t("td",[e.isEditMode(s)?t("select",{directives:[{name:"model",rawName:"v-model",value:s.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(s,"role",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:"1"}},[e._v("User")]),t("option",{attrs:{value:"2"}},[e._v("Admin")])]):t("div",[1===s.role?t("span",[e._v("User")]):2===s.role?t("span",[e._v("Admin")]):t("span",[e._v("-")])])]),t("td",[e.isEditMode(s)?t("div",{staticClass:"row-actions"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:e.isSaving},on:{click:function(t){return e.cancelEditMode(s)}}},[t("i",{staticClass:"fa fa-times"})]),t("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:e.isSaving},on:{click:function(t){return e.updateUser(s)}}},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),t("span",{directives:[{name:"show",rawName:"v-show",value:e.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])]):t("div",{staticClass:"row-actions"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten",disabled:e.isSaving},on:{click:function(t){return e.editUser(s)}}},[t("i",{staticClass:"fa fa-edit"})]),t("button",{staticClass:"btn btn-warning",attrs:{type:"button","aria-label":"Passwort zurücksetzen",title:"Passwort zurücksetzen",disabled:e.isSaving},on:{click:function(t){return e.revokePassword(s)}}},[t("i",{staticClass:"fa fa-unlock-alt"})]),t("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen",disabled:e.isSaving},on:{click:function(t){return e.deleteUser(s)}}},[t("i",{staticClass:"fa fa-trash"})])])])])}))],2)])])])])])])])])},i=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("Name")]),t("th",{attrs:{scope:"col"}},[e._v("Email")]),t("th",{attrs:{scope:"col"}},[e._v(" Email Verifiziert ")]),t("th",{attrs:{scope:"col"}},[e._v("Rolle")]),t("th",{attrs:{scope:"col"}})])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("tr",[t("td",{attrs:{colspan:"5"}},[t("span",{staticClass:"spinner-border spinner-border-sm"}),e._v(" Benutzer werden geladen ")])])}],r=s(538),n=s(5429),o=s(9490),l=r["default"].extend({name:"User",data(){return{isLoading:!1,isCreating:!1,isSaving:!1,user:null}},computed:{users(){return this.$store.state.users.all}},filters:{date:function(e){return e?o.ou.fromISO(e).setLocale("de").toLocaleString(o.ou.DATETIME_MED):""}},created(){this.loadUser()},methods:{loadUser(){this.isLoading=!0,this.$store.dispatch("users/load").catch((()=>{this.$snotify.error("User konnten nicht geladen werden")})).finally((()=>{this.isLoading=!1}))},createUser(){this.user=new n.Z,this.isCreating=!0},isEditMode(e){return this.user===e},addUser(){this.isSaving=!0,this.$store.dispatch("users/add",this.user).then((()=>{this.$snotify.success("Der Benutzer wurde hinzugefügt.")})).catch((()=>{this.$snotify.error("Der Benutzer konnte nicht hinzugefügt werden!")})).finally((()=>{this.isSaving=!1,this.isCreating=!1}))},editUser(e){this.user=e},updateUser(e){this.isSaving=!0,this.$store.dispatch("users/update",e).then((()=>{this.$snotify.success("Die Änderungen wurden gespeichert!")})).catch((()=>{this.$snotify.error("Die Änderungen konnten nicht gespeichert werden!")})).finally((()=>{this.isSaving=!1}))},revokePassword(e){window.confirm("Soll das Passwort wirklich zurückgesetzt werden?")&&(this.isSaving=!0,this.$store.dispatch("users/revoke",e).then((()=>{this.$snotify.success("Das Passwort wurde zurückgesetzt!")})).catch((()=>{this.$snotify.error("Das Passwort konnte nicht zurückgesetzt werden!")})).finally((()=>{this.isSaving=!1})))},deleteUser(e){window.confirm("Soll der User wirklich gelöscht werden?")&&(this.isSaving=!0,this.$store.dispatch("users/delete",e).then((()=>{this.$snotify.success("Der User wurde gelöscht!")})).catch((()=>{this.$snotify.error("Der User konnte nicht gelöscht werden!")})).finally((()=>{this.isSaving=!1})))},cancelEditMode(){this.user=null}}}),c=l,u=s(1001),d=(0,u.Z)(c,a,i,!1,null,"523385e6",null),v=d.exports}}]);
//# sourceMappingURL=user.d1c6459d.js.map