(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{1511:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-container"},[s("div",{staticClass:"workspace"},[s("div",{staticClass:"main-content"},[s("div",{staticClass:"container"},[s("div",{staticClass:"container mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:e.isCreating},on:{click:e.createUser}},[e._v(" Erstellen ")]),s("h2",[e._v("Benutzerverwaltung")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("table",{staticClass:"table table-bordered table-sm mt-5"},[e._m(0),e.isLoading?s("tbody",[e._m(1)]):e._e(),e.isLoading?e._e():s("tbody",[e.isCreating?s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),s("td"),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:e.user.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.user,"role",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"}},[e._v("User")]),s("option",{attrs:{value:"2"}},[e._v("Admin")])])]),s("td",[s("div",[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:e.isSaving},on:{click:function(t){return e.cancelCreate()}}},[s("i",{staticClass:"fa fa-times"})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:e.isSaving},on:{click:function(t){return e.addUser(e.user)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!e.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])])])]):e._e(),e._l(e.users,(function(t){return s("tr",{key:t.id},[s("td",[e.isEditMode(t)?s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"user.name"}],staticClass:"form-control",domProps:{value:t.name},on:{input:function(s){s.target.composing||e.$set(t,"name",s.target.value)}}}):s("span",[e._v(e._s(t.name))])]),s("td",[e.isEditMode(t)?s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"user.email"}],staticClass:"form-control",domProps:{value:t.email},on:{input:function(s){s.target.composing||e.$set(t,"email",s.target.value)}}}):s("a",{attrs:{href:"mailto:"+t.email}},[e._v(e._s(t.email))])]),s("td",[e._v(" "+e._s(e._f("date")(t.email_verified_at))+" ")]),s("td",[e.isEditMode(t)?s("select",{directives:[{name:"model",rawName:"v-model",value:t.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"role",s.target.multiple?i:i[0])}}},[s("option",{attrs:{value:"1"}},[e._v("User")]),s("option",{attrs:{value:"2"}},[e._v("Admin")])]):s("div",[1===t.role?s("span",[e._v("User")]):2===t.role?s("span",[e._v("Admin")]):s("span",[e._v("-")])])]),s("td",[e.isEditMode(t)?s("div",{staticClass:"row-actions"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:e.isSaving},on:{click:function(s){return e.cancelEditMode(t)}}},[s("i",{staticClass:"fa fa-times"})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:e.isSaving},on:{click:function(s){return e.updateUser(t)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!e.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])]):s("div",{staticClass:"row-actions"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten",disabled:e.isSaving},on:{click:function(s){return e.editUser(t)}}},[s("i",{staticClass:"fa fa-edit"})]),s("button",{staticClass:"btn btn-warning",attrs:{type:"button","aria-label":"Passwort zurücksetzen",title:"Passwort zurücksetzen",disabled:e.isSaving},on:{click:function(s){return e.revokePassword(t)}}},[s("i",{staticClass:"fa fa-unlock-alt"})]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen",disabled:e.isSaving},on:{click:function(s){return e.deleteUser(t)}}},[s("i",{staticClass:"fa fa-trash"})])])])])}))],2)])])])])])])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[e._v("Name")]),s("th",{attrs:{scope:"col"}},[e._v("Email")]),s("th",{attrs:{scope:"col"}},[e._v(" Email Verifiziert ")]),s("th",{attrs:{scope:"col"}},[e._v("Rolle")]),s("th",{attrs:{scope:"col"}})])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",{attrs:{colspan:"5"}},[s("span",{staticClass:"spinner-border spinner-border-sm"}),e._v(" Benutzer werden geladen ")])])}],a=(s("d3b7"),s("2b0e")),r=s("3a3d"),o=s("1315"),c=a["default"].extend({name:"User",data:function(){return{isLoading:!1,isCreating:!1,isSaving:!1,user:null}},computed:{users:function(){return this.$store.state.users.all}},filters:{date:function(e){return e?o["DateTime"].fromISO(e).setLocale("de").toLocaleString(o["DateTime"].DATETIME_MED):""}},created:function(){this.loadUser()},methods:{loadUser:function(){var e=this;this.isLoading=!0,this.$store.dispatch("users/load").catch((function(){e.$snotify.error("User konnten nicht geladen werden")})).finally((function(){e.isLoading=!1}))},createUser:function(){this.user=new r["a"],this.isCreating=!0},isEditMode:function(e){return this.user===e},addUser:function(){var e=this;this.isSaving=!0,this.$store.dispatch("users/add",this.user).then((function(){e.$snotify.success("Der Benutzer wurde hinzugefügt.")})).catch((function(){e.$snotify.error("Der Benutzer konnte nicht hinzugefügt werden!")})).finally((function(){e.isSaving=!1,e.isCreating=!1}))},editUser:function(e){this.user=e},updateUser:function(e){var t=this;this.isSaving=!0,this.$store.dispatch("users/update",e).then((function(){t.$snotify.success("Die Änderungen wurden gespeichert!")})).catch((function(){t.$snotify.error("Die Änderungen konnten nicht gespeichert werden!")})).finally((function(){t.isSaving=!1}))},revokePassword:function(e){var t=this;window.confirm("Soll das Passwort wirklich zurückgesetzt werden?")&&(this.isSaving=!0,this.$store.dispatch("users/revoke",e).then((function(){t.$snotify.success("Das Passwort wurde zurückgesetzt!")})).catch((function(){t.$snotify.error("Das Passwort konnte nicht zurückgesetzt werden!")})).finally((function(){t.isSaving=!1})))},deleteUser:function(e){var t=this;window.confirm("Soll der User wirklich gelöscht werden?")&&(this.isSaving=!0,this.$store.dispatch("users/delete",e).then((function(){t.$snotify.success("Der User wurde gelöscht!")})).catch((function(){t.$snotify.error("Der User konnte nicht gelöscht werden!")})).finally((function(){t.isSaving=!1})))},cancelEditMode:function(){this.user=null}}}),l=c,u=(s("1d4f"),s("2877")),d=Object(u["a"])(l,i,n,!1,null,"6766e910",null);t["default"]=d.exports},"1d4f":function(e,t,s){"use strict";var i=s("b00e"),n=s.n(i);n.a},b00e:function(e,t,s){}}]);
//# sourceMappingURL=user.913266fc.js.map