(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages"],{"07ec":function(t,e,i){"use strict";var n=i("6ead"),s=i.n(n);s.a},"256b":function(t,e,i){"use strict";var n=i("af93"),s=i.n(n);s.a},"6ead":function(t,e,i){},9723:function(t,e,i){},ae02:function(t,e,i){"use strict";var n=i("9723"),s=i.n(n);s.a},af93:function(t,e,i){},ee3e:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pages-container"},[i("div",{staticClass:"workspace"},[i("div",{staticClass:"main-content"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"mt-3"},[i("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:t.isCreating},on:{click:t.createPage}},[t._v(" Erstellen ")]),i("h1",[t._v("Seiten")])]),i("table",{staticClass:"table table-bordered table-sm"},[t._m(0),t.isLoading?i("tbody",[i("tr",[i("td",{attrs:{colspan:"2"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"spinner-border spinner-border-sm"}),t._v(" Seiten werden geladen ")])])]):0==t.pages.length?i("tbody",[t._m(1)]):i("tbody",t._l(t.pages,(function(e){return i("tr",{key:e.id},[i("td",[i("div",[t._v(t._s(e.seitentitel))])]),i("td",{staticClass:"table-actions"},[i("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten"},on:{click:function(i){return t.editPage(e)}}},[i("i",{staticClass:"fa fa-edit"})]),i("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen"},on:{click:function(i){return t.deletePage(e)}}},[i("i",{staticClass:"fa fa-trash"})])])])})),0)])])])]),i("page-entry-form",{directives:[{name:"show",rawName:"v-show",value:t.isCreating,expression:"isCreating"}],attrs:{bus:t.eventBus,adminMode:t.isAdmin},on:{cancelForm:t.cancelPageForm,onSubmissionStart:function(e){t.isSubmitting=!0},onSubmissionEnd:function(e){t.isSubmitting=!1},onSubmissionSuccess:t.onFormSubmissionSuccess,onSubmissionError:t.onFormSubmissionError}})],1)])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{staticClass:"date",attrs:{scope:"col"}},[t._v("Titel")]),i("th",{attrs:{scope:"col",width:"108"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{attrs:{colspan:"2"}},[t._v(" Keine Seiten vorhanden. ")])])}],a=(i("d3b7"),i("2b0e")),r=i("c1df"),o=i.n(r),c=i("0255"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-container"},[i("div",{staticClass:"form-background"}),i("div",{staticClass:"event-create"},[i("form",{staticClass:"container form",on:{submit:t.submitForm}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Titel")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.pageEntry.seitentitel,expression:"pageEntry.seitentitel"}],staticClass:"form-control form-control-sm",attrs:{type:"text","aria-describedby":"titelHelp",required:"",autofocus:""},domProps:{value:t.pageEntry.seitentitel},on:{input:function(e){e.target.composing||t.$set(t.pageEntry,"seitentitel",e.target.value)}}}),i("small",{staticClass:"form-text text-muted",attrs:{id:"titelHelp"}},[t._v(" Die Überschrift der Seite ")])])]),i("div",{staticClass:"col-md-8"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Inhalt")]),t.adminMode&&t.adminMode?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pageEntry.inhalt,expression:"pageEntry.inhalt"}],staticClass:"form-control",attrs:{rows:"20"},domProps:{value:t.pageEntry.inhalt},on:{input:function(e){e.target.composing||t.$set(t.pageEntry,"inhalt",e.target.value)}}}):i("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.pageEntry.inhalt,callback:function(e){t.$set(t.pageEntry,"inhalt",e)},expression:"pageEntry.inhalt"}})],1),i("div",{staticClass:"text-right"},[i("button",{staticClass:"btn",attrs:{type:"button",disabled:t.isSubmitting},on:{click:t.cancelForm}},[t._v(" Abbrechen ")]),i("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.isSubmitting}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isSubmitting,expression:"isSubmitting"}],staticClass:"spinner-border spinner-border-sm"}),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSubmitting,expression:"!isSubmitting"}]},[t._v(" Speichern ")])])])])])])])])},u=[],d=i("60a3"),m=i("fb3d"),f=i.n(m),g=(i("0e5a"),d["a"].extend({name:"PageEntryForm",props:["bus","adminMode"],data:function(){return{isSubmitting:!1,pageEntry:new c["a"],editor:f.a,editorConfig:{height:400,language:"de",toolbar:["bold","italic","|","bulletedList","numberedList","|","link"]}}},mounted:function(){this.bus.$on("edit",this.edit)},methods:{submitForm:function(t){var e=this;if(t.preventDefault(),!this.isSubmitting){this.isSubmitting=!0,this.$emit("onSubmissionStart",!0);var i=this.pageEntry.id?"update":"create";this.$store.dispatch("pages/".concat(i),this.pageEntry).then((function(){e.isCreating=!1,e.$emit("onSubmissionSuccess")})).catch((function(t){e.$emit("onSubmissionError",t)})).finally((function(){e.isSubmitting=!1,e.$emit("onSubmissionEnd",!1)}))}},edit:function(t){this.pageEntry=c["a"].init(t)},cancelForm:function(){this.$emit("cancelForm")}}})),b=g,h=(i("256b"),i("ae02"),i("2877")),p=Object(h["a"])(b,l,u,!1,null,"61d5d886",null),v=p.exports,C=i("0ff2"),S=a["default"].extend({components:{PageEntryForm:v},name:"Pages",data:function(){return{isLoading:!1,isCreating:!1,isSubmitting:!1,eventBus:new a["default"]}},computed:{pages:function(){return this.$store.state.pages.all},currentUser:function(){return this.$store.state.auth.user},isAdmin:function(){return this.currentUser&&this.currentUser.role===C["a"].Admin}},filters:{moment:function(t){return t?o()(t).format("DD. MMMM YYYY"):""}},created:function(){this.loadPages()},methods:{loadPages:function(){var t=this;this.isLoading=!0,this.$store.dispatch("pages/load").catch((function(){t.$snotify.error("Die Seiten konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createPage:function(){this.isCreating=!0,this.eventBus.$emit("edit",new c["a"])},editPage:function(t){this.isCreating=!0,this.eventBus.$emit("edit",t)},cancelPageForm:function(){this.isCreating=!1},deletePage:function(t){var e=this;window.confirm("Soll die Seite wirklich gelöscht werden?")&&this.$store.dispatch("pages/delete",t).then((function(){e.$snotify.success("Die Seite wurde gelöscht!")})).catch((function(){e.$snotify.error("Die Seite konnte nicht gelöscht werden!")}))},onFormSubmissionSuccess:function(){this.$snotify.success("Die Seite wurde gespeichert!"),this.isCreating=!1},onFormSubmissionError:function(){this.$snotify.error("Die Seite konnte nicht gespeichert werden!"),this.isCreating=!1}}}),w=S,y=(i("07ec"),Object(h["a"])(w,n,s,!1,null,"9439d482",null));e["default"]=y.exports}}]);
//# sourceMappingURL=pages.db9e3a8a.js.map