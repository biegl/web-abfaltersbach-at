(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["events"],{"066e":function(t,e,n){"use strict";var i=n("3726"),s=n.n(i);s.a},"14c3":function(t,e,n){var i=n("c6b6"),s=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(t,e)}},"1cc4":function(t,e,n){},2718:function(t,e,n){"use strict";var i=n("d96d"),s=n.n(i);s.a},3726:function(t,e,n){},5319:function(t,e,n){"use strict";var i=n("d784"),s=n("825a"),a=n("7b0b"),r=n("50c4"),c=n("a691"),o=n("1d80"),l=n("8aa5"),u=n("14c3"),d=Math.max,f=Math.min,v=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var b=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=i.REPLACE_KEEPS_$0,E=b?"$":"$0";return[function(n,i){var s=o(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,s,i):e.call(String(s),n,i)},function(t,i){if(!b&&g||"string"===typeof i&&-1===i.indexOf(E)){var a=n(e,t,this,i);if(a.done)return a.value}var o=s(t),v=String(this),h="function"===typeof i;h||(i=String(i));var p=o.global;if(p){var y=o.unicode;o.lastIndex=0}var S=[];while(1){var _=u(o,v);if(null===_)break;if(S.push(_),!p)break;var C=String(_[0]);""===C&&(o.lastIndex=l(v,r(o.lastIndex),y))}for(var $="",D=0,w=0;w<S.length;w++){_=S[w];for(var k=String(_[0]),I=d(f(c(_.index),v.length),0),R=[],F=1;F<_.length;F++)R.push(m(_[F]));var P=_.groups;if(h){var U=[k].concat(R,I,v);void 0!==P&&U.push(P);var Y=String(i.apply(void 0,U))}else Y=x(k,v,I,R,P,i);I>=D&&($+=v.slice(D,I)+Y,D=I+k.length)}return $+v.slice(D)}];function x(t,n,i,s,r,c){var o=i+t.length,l=s.length,u=p;return void 0!==r&&(r=a(r),u=h),e.call(c,u,(function(e,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(o);case"<":c=r[a.slice(1,-1)];break;default:var u=+a;if(0===u)return e;if(u>l){var d=v(u/10);return 0===d?e:d<=l?void 0===s[d-1]?a.charAt(1):s[d-1]+a.charAt(1):e}c=s[u-1]}return void 0===c?"":c}))}}))},"81cd":function(t,e,n){"use strict";var i=n("1cc4"),s=n.n(i);s.a},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},9263:function(t,e,n){"use strict";var i=n("ad6d"),s=n("9f7f"),a=RegExp.prototype.exec,r=String.prototype.replace,c=a,o=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=s.UNSUPPORTED_Y||s.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=o||u||l;d&&(c=function(t){var e,n,s,c,d=this,f=l&&d.sticky,v=i.call(d),h=d.source,p=0,m=t;return f&&(v=v.replace("y",""),-1===v.indexOf("g")&&(v+="g"),m=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,p++),n=new RegExp("^(?:"+h+")",v)),u&&(n=new RegExp("^"+h+"$(?!\\s)",v)),o&&(e=d.lastIndex),s=a.call(f?n:d,m),f?s?(s.input=s.input.slice(p),s[0]=s[0].slice(p),s.index=d.lastIndex,d.lastIndex+=s[0].length):d.lastIndex=0:o&&s&&(d.lastIndex=d.global?s.index+s[0].length:e),u&&s&&s.length>1&&r.call(s[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s}),t.exports=c},"9f7f":function(t,e,n){"use strict";var i=n("d039");function s(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=s("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=s("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},aa9c:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"events-container"},[n("div",{staticClass:"workspace"},[n("div",{staticClass:"main-content"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"mt-3"},[n("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:!!t.selectedEvent},on:{click:t.createEvent}},[t._v(" Erstellen ")]),n("h1",[t._v("Veranstaltungen")])]),n("table",{staticClass:"table table-bordered table-sm"},[t._m(0),t.isLoading?n("tbody",[n("tr",[n("td",{attrs:{colspan:"4"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"spinner-border spinner-border-sm"}),t._v(" Veranstaltungen werden geladen ")])])]):0==t.events.length?n("tbody",[t._m(1)]):n("tbody",t._l(t.events,(function(e){return n("tr",{key:e.ID},[n("td",[n("span",{staticClass:"no-break"},[t._v(" "+t._s(t._f("moment")(e.date))+" ")])]),n("td",[n("div",{domProps:{innerHTML:t._s(e.text)}})]),n("td",[e.attachments&&0!=e.attachments.length?n("ul",{staticClass:"events-file-list"},t._l(e.attachments,(function(e){return n("li",{key:e.ID},[n("a",{attrs:{href:e.frontendPath}},[t._v(t._s(e.title))]),n("br"),n("small",[t._v(t._s(e.readableFileSize))])])})),0):n("span",[t._v("-")])]),n("td",[n("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten"},on:{click:function(n){return t.editEvent(e)}}},[n("i",{staticClass:"fa fa-edit"})]),n("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen"},on:{click:function(n){return t.deleteEvent(e)}}},[n("i",{staticClass:"fa fa-trash"})])])])})),0)])])])]),n("event-entry-form",{directives:[{name:"show",rawName:"v-show",value:!!t.selectedEvent,expression:"!!selectedEvent"}],on:{cancelForm:t.cancelEventForm,onSubmissionStart:function(e){t.isSubmitting=!0},onSubmissionEnd:function(e){t.isSubmitting=!1},onSubmissionSuccess:t.onFormSubmissionSuccess,onSubmissionError:t.onFormSubmissionError}})],1)])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{staticClass:"date",attrs:{scope:"col"}},[t._v("Datum")]),n("th",{attrs:{scope:"col"}},[t._v("Beschreibung")]),n("th",{attrs:{scope:"col"}},[t._v("Dateien")]),n("th",{attrs:{scope:"col",width:"108"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{attrs:{colspan:"4"}},[t._v(" Im Moment sind keine Veranstaltungen geplant. ")])])}],a=(n("d3b7"),n("2b0e")),r=n("c1df"),c=n.n(r),o=n("04b2"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.eventEntry?n("div",{staticClass:"form-container"},[n("div",{staticClass:"form-background"}),n("div",{staticClass:"event-create"},[n("form",{staticClass:"container form",on:{submit:t.submitForm}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"date"}},[t._v("Datum")]),n("date-picker",{attrs:{"help-id":"dateHelp"},model:{value:t.eventEntry.date,callback:function(e){t.$set(t.eventEntry,"date",e)},expression:"eventEntry.date"}}),n("small",{staticClass:"form-text text-muted",attrs:{id:"dateHelp"}},[t._v(" Datum der Veranstaltung ")])],1),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"file"}},[t._v("Dateien")]),t.eventEntry.attachments&&t.eventEntry.attachments.length>0?n("ul",{staticClass:"file-list"},t._l(t.eventEntry.attachments,(function(e){return n("li",{key:e.ID},[t._v(" "+t._s(e.title)+" "),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(n){return t.deleteFile(e)}}},[n("i",{staticClass:"fa fa-trash"})])])})),0):t._e(),t.eventEntry.id?n("file-input",{attrs:{route:t.attachmentRoute},on:{onUploadSuccessful:t.onUploadSuccessful,onUploadFailed:t.onUploadFailed}}):n("div",[n("small",[t._v("Dateien können erst hochgeladen werden, nachdem die Veranstaltung gespeichert wurde.")])])],1)]),n("div",{staticClass:"col-md-8"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Text")]),n("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.eventEntry.text,callback:function(e){t.$set(t.eventEntry,"text",e)},expression:"eventEntry.text"}})],1),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn",attrs:{type:"button",disabled:t.isSubmitting},on:{click:t.cancelForm}},[t._v(" Abbrechen ")]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.isSubmissionDisabled}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isSubmitting,expression:"isSubmitting"}],staticClass:"spinner-border spinner-border-sm"}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSubmitting,expression:"!isSubmitting"}]},[t._v(" Speichern ")])])])])])])])]):t._e()},u=[],d=(n("99af"),n("ac1f"),n("5319"),n("60a3")),f=n("fb3d"),v=n.n(f),h=(n("0e5a"),n("e94a")),p=n("b1b6"),m=n("d70b"),b=d["a"].extend({name:"EventEntryForm",components:{DatePicker:h["a"],FileInput:p["a"]},computed:{attachmentRoute:function(){return this.eventEntry.id?"".concat(m["a"].host,"/api/events/").concat(this.eventEntry.id,"/attach"):""},isSubmissionDisabled:function(){return!!this.isSubmitting||(!this.eventEntry.text||0==this.eventEntry.text.length)},eventEntry:function(){return this.$store.state.events.selectedEvent}},data:function(){return{isSubmitting:!1,editor:v.a,editorConfig:{height:400,language:"de",toolbar:["bold","italic","|","bulletedList","numberedList","|","link"]}}},methods:{submitForm:function(t){var e=this;if(t.preventDefault(),!this.isSubmitting){this.isSubmitting=!0,this.$emit("onSubmissionStart",!0);var n=this.eventEntry.id?"update":"create";this.eventEntry.date=c()(this.eventEntry.date).format("YYYY-MM-DD"),this.eventEntry.text=this.eventEntry.text.replace(/<\/?p>/g,""),this.$store.dispatch("events/".concat(n),this.eventEntry).then((function(){e.isCreating=!1,e.$emit("onSubmissionSuccess")})).catch((function(t){e.$emit("onSubmissionError",t)})).finally((function(){e.isSubmitting=!1,e.$emit("onSubmissionEnd",!1)}))}},cancelForm:function(){this.$emit("cancelForm")},onUploadSuccessful:function(t){this.$store.dispatch("events/updateEvent",o["a"].init(t[0])),this.$snotify.success("Upload erfolgreich")},onUploadFailed:function(){this.$snotify.error("Beim Upload ist ein Fehler aufgetreten!")},deleteFile:function(t){var e=this;window.confirm('Soll die Datei "'.concat(t.title,'" wirklich gelöscht werden?'))&&this.$store.dispatch("events/deleteFile",{event:this.eventEntry,file:t}).then((function(){e.$snotify.success("Die Datei wurde gelöscht.")})).catch((function(){e.$snotify.error("Die Datei konnte nicht gelöscht werden!")}))}}}),g=b,E=(n("066e"),n("2718"),n("2877")),x=Object(E["a"])(g,l,u,!1,null,"0213f303",null),y=x.exports,S=a["default"].extend({components:{EventEntryForm:y},name:"Events",data:function(){return{isLoading:!1,isSubmitting:!1}},computed:{events:function(){return this.$store.state.events.all},selectedEvent:function(){return this.$store.state.events.selectedEvent}},filters:{moment:function(t){return t?c()(t).format("DD. MMMM YYYY"):""}},created:function(){this.loadEvents()},methods:{loadEvents:function(){var t=this;this.isLoading=!0,this.$store.dispatch("events/load").catch((function(){t.$snotify.error("Veranstaltungen konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createEvent:function(){this.$store.dispatch("events/select",new o["a"])},editEvent:function(t){this.$store.dispatch("events/select",o["a"].init(t))},cancelEventForm:function(){this.$store.dispatch("events/select",null)},deleteEvent:function(t){var e=this;window.confirm("Soll der Eintrag wirklich gelöscht werden?")&&this.$store.dispatch("events/delete",t).then((function(){e.$snotify.success("Die Veranstaltung wurde gelöscht!")})).catch((function(){e.$snotify.error("Die Veranstaltung konnte nicht gelöscht werden!")}))},onFormSubmissionSuccess:function(){this.$snotify.success("Die Veranstaltung wurde gespeichert!"),this.$store.dispatch("events/select",null)},onFormSubmissionError:function(){this.$snotify.error("Die Veranstaltung konnte nicht gespeichert werden!")}}}),_=S,C=(n("81cd"),Object(E["a"])(_,i,s,!1,null,"353b3f70",null));e["default"]=C.exports},ac1f:function(t,e,n){"use strict";var i=n("23e7"),s=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},d784:function(t,e,n){"use strict";n("ac1f");var i=n("6eeb"),s=n("d039"),a=n("b622"),r=n("9263"),c=n("9112"),o=a("species"),l=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=a("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),v=!s((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,d){var h=a(t),p=!s((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),m=p&&!s((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[o]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return e=!0,null},n[h](""),!e}));if(!p||!m||"replace"===t&&(!l||!u||f)||"split"===t&&!v){var b=/./[h],g=n(h,""[t],(function(t,e,n,i,s){return e.exec===r?p&&!s?{done:!0,value:b.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),E=g[0],x=g[1];i(String.prototype,t,E),i(RegExp.prototype,h,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}d&&c(RegExp.prototype[h],"sham",!0)}},d96d:function(t,e,n){},e94a:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-date-picker",{attrs:{attributes:t.attrs,value:t.selectedDate,"min-date":this.minDate,locale:"de","is-dark":"",popover:{placement:"bottom",visibility:"click"}},on:{input:function(e){return t.selectDate(e)}}},[n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control form-control-sm",attrs:{type:"text","aria-describedby":t.helpId,readonly:"",id:"date"},domProps:{value:t._f("moment")(t.selectedDate)}}),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"}},[n("i",{staticClass:"fa fa-calendar"})]),t.clearButton?n("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:t.clearDate}},[n("i",{staticClass:"fa fa-ban"})]):t._e()])])])},s=[],a=n("60a3"),r=n("c1df"),c=n.n(r),o=a["a"].extend({name:"DatePicker",model:{prop:"selectedDate",event:"change"},props:["selectedDate","helpId","minDate","clearButton"],data:function(){return{attrs:[]}},filters:{moment:function(t){return t?c()(t).format("DD. MMMM YYYY"):""}},methods:{selectDate:function(t){var e=c()(t).format("YYYY-MM-DD");this.$emit("change",e)},clearDate:function(t){t.stopImmediatePropagation(),t.preventDefault(),this.$emit("change",null)}}}),l=o,u=n("2877"),d=Object(u["a"])(l,i,s,!1,null,null,null);e["a"]=d.exports}}]);
//# sourceMappingURL=events.70241d77.js.map