(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["news"],{"0f29":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group"},[n("label",[t._v("Inhalt")]),t.enableSourceMode?n("div",{staticClass:"custom-control custom-switch",staticStyle:{float:"right"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sourceEditor,expression:"sourceEditor"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"source-switch"},domProps:{checked:Array.isArray(t.sourceEditor)?t._i(t.sourceEditor,null)>-1:t.sourceEditor},on:{change:function(e){var n=t.sourceEditor,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=null,r=t._i(n,a);i.checked?r<0&&(t.sourceEditor=n.concat([a])):r>-1&&(t.sourceEditor=n.slice(0,r).concat(n.slice(r+1)))}else t.sourceEditor=s}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"source-switch"}},[t._v("Source Editor")])]):t._e(),t.enableSourceMode&&t.sourceEditor?n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contentVal,expression:"contentVal"}],staticClass:"form-control",attrs:{rows:"20"},domProps:{value:t.contentVal},on:{input:function(e){e.target.composing||(t.contentVal=e.target.value)}}}):n("editor",{attrs:{"api-key":t.apiKey,init:t.editorConfig},model:{value:t.contentVal,callback:function(e){t.contentVal=e},expression:"contentVal"}})],1)},s=[],a=n("60a3"),r=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],o=function(t){return-1!==r.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},c=function(t,e,n){Object.keys(e).filter(o).forEach((function(i){var s=e[i];"function"===typeof s&&("onInit"===i?s(t,n):n.on(i.substring(2),(function(t){return s(t,n)})))}))},l=function(t,e){var n=t.$props.modelEvents?t.$props.modelEvents:null,i=Array.isArray(n)?n.join(" "):n;t.$watch("value",(function(n,i){e&&"string"===typeof n&&n!==i&&n!==e.getContent({format:t.$props.outputFormat})&&e.setContent(n)})),e.on(i||"change input undo redo",(function(){t.$emit("input",e.getContent({format:t.$props.outputFormat}))}))},u=function(t,e,n){var i=e.$props.value?e.$props.value:"",s=e.$props.initialValue?e.$props.initialValue:"";n.setContent(i||(e.initialized?e.cache:s)),e.$listeners.input&&l(e,n),c(t,e.$listeners,n),e.initialized=!0},d=0,p=function(t){var e=Date.now(),n=Math.floor(1e9*Math.random());return d++,t+"_"+n+d+String(e)},f=function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()},m=function(t){return"undefined"===typeof t||""===t?[]:Array.isArray(t)?t:t.split(" ")},h=function(t,e){return m(t).concat(m(e))},v=function(t){return null===t||void 0===t},b=function(){return{listeners:[],scriptId:p("tiny-script"),scriptLoaded:!1}},w=function(){var t=b(),e=function(t,e,n,i){var s=e.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=t,s.src=n;var a=function(){s.removeEventListener("load",a),i()};s.addEventListener("load",a),e.head&&e.head.appendChild(s)},n=function(n,i,s){t.scriptLoaded?s():(t.listeners.push(s),n.getElementById(t.scriptId)||e(t.scriptId,n,i,(function(){t.listeners.forEach((function(t){return t()})),t.scriptLoaded=!0})))},i=function(){t=b()};return{load:n,reinitialize:i}},g=w(),y=n("c4a9"),C={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},S=function(){return S=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},S.apply(this,arguments)},_=function(t,e,n){return t(n||"div",{attrs:{id:e}})},E=function(t,e){return t("textarea",{attrs:{id:e},style:{visibility:"hidden"}})},$=function(t){return function(){var e=S(S({},t.$props.init),{readonly:t.$props.disabled,selector:"#"+t.elementId,plugins:h(t.$props.init&&t.$props.init.plugins,t.$props.plugins),toolbar:t.$props.toolbar||t.$props.init&&t.$props.init.toolbar,inline:t.inlineEditor,setup:function(e){t.editor=e,e.on("init",(function(n){return u(n,t,e)})),t.$props.init&&"function"===typeof t.$props.init.setup&&t.$props.init.setup(e)}});f(t.element)&&(t.element.style.visibility="",t.element.style.display=""),Object(y["a"])().init(e)}},D={props:C,created:function(){this.elementId=this.$props.id||p("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==Object(y["a"])())$(this)();else if(this.element&&this.element.ownerDocument){var t=this.$props.cloudChannel?this.$props.cloudChannel:"5",e=this.$props.apiKey?this.$props.apiKey:"no-api-key",n=v(this.$props.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+e+"/tinymce/"+t+"/tinymce.min.js":this.$props.tinymceScriptSrc;g.load(this.element.ownerDocument,n,$(this))}},beforeDestroy:function(){null!==Object(y["a"])()&&Object(y["a"])().remove(this.editor)},deactivated:function(){var t;this.inlineEditor||(this.cache=this.editor.getContent(),null===(t=Object(y["a"])())||void 0===t||t.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&$(this)()},render:function(t){return this.inlineEditor?_(t,this.elementId,this.$props.tagName):E(t,this.elementId)}},k=D,x=n("d70b"),N=a["a"].extend({name:"TextEditor",props:["value","config","enableSourceMode"],components:{editor:k},data:function(){return{sourceEditor:!1,editorConfig:this.config||x["a"].defaultEditorConfig}},computed:{apiKey:function(){return x["a"].editorApiKey},contentVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}}),A=N,U=(n("1b91"),n("2877")),M=Object(U["a"])(A,i,s,!1,null,null,null);e["a"]=M.exports},1511:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-container"},[n("div",{staticClass:"workspace"},[n("div",{staticClass:"main-content"},[n("div",{staticClass:"container"},[n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:t.isCreating},on:{click:t.createUser}},[t._v(" Erstellen ")]),n("h2",[t._v("Benutzerverwaltung")])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("table",{staticClass:"table table-bordered table-sm mt-5"},[t._m(0),t.isLoading?n("tbody",[t._m(1)]):t._e(),t.isLoading?t._e():n("tbody",[t.isCreating?n("tr",[n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),n("td"),n("td",[n("select",{directives:[{name:"model",rawName:"v-model",value:t.user.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"role",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:"1"}},[t._v("User")]),n("option",{attrs:{value:"2"}},[t._v("Admin")])])]),n("td",[n("div",[n("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:t.isSaving},on:{click:function(e){return t.cancelCreate()}}},[n("i",{staticClass:"fa fa-times"})]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:t.isSaving},on:{click:function(e){return t.addUser(t.user)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])])])]):t._e(),t._l(t.users,(function(e){return n("tr",{key:e.id},[n("td",[t.isEditMode(e)?n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"user.name"}],staticClass:"form-control",domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}}):n("span",[t._v(t._s(e.name))])]),n("td",[t.isEditMode(e)?n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"user.email"}],staticClass:"form-control",domProps:{value:e.email},on:{input:function(n){n.target.composing||t.$set(e,"email",n.target.value)}}}):n("a",{attrs:{href:"mailto:"+e.email}},[t._v(t._s(e.email))])]),n("td",[t._v(" "+t._s(t._f("date")(e.email_verified_at))+" ")]),n("td",[t.isEditMode(e)?n("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(n){var i=Array.prototype.filter.call(n.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"role",n.target.multiple?i:i[0])}}},[n("option",{attrs:{value:"1"}},[t._v("User")]),n("option",{attrs:{value:"2"}},[t._v("Admin")])]):n("div",[1===e.role?n("span",[t._v("User")]):2===e.role?n("span",[t._v("Admin")]):n("span",[t._v("-")])])]),n("td",[t.isEditMode(e)?n("div",{staticClass:"row-actions"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:t.isSaving},on:{click:function(n){return t.cancelEditMode(e)}}},[n("i",{staticClass:"fa fa-times"})]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:t.isSaving},on:{click:function(n){return t.updateUser(e)}}},[n("i",{directives:[{name:"show",rawName:"v-show",value:!t.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])]):n("div",{staticClass:"row-actions"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten",disabled:t.isSaving},on:{click:function(n){return t.editUser(e)}}},[n("i",{staticClass:"fa fa-edit"})]),n("button",{staticClass:"btn btn-warning",attrs:{type:"button","aria-label":"Passwort zurücksetzen",title:"Passwort zurücksetzen",disabled:t.isSaving},on:{click:function(n){return t.revokePassword(e)}}},[n("i",{staticClass:"fa fa-unlock-alt"})]),n("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen",disabled:t.isSaving},on:{click:function(n){return t.deleteUser(e)}}},[n("i",{staticClass:"fa fa-trash"})])])])])}))],2)])])])])])])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("Name")]),n("th",{attrs:{scope:"col"}},[t._v("Email")]),n("th",{attrs:{scope:"col"}},[t._v(" Email Verifiziert ")]),n("th",{attrs:{scope:"col"}},[t._v("Rolle")]),n("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{attrs:{colspan:"5"}},[n("span",{staticClass:"spinner-border spinner-border-sm"}),t._v(" Benutzer werden geladen ")])])}],a=(n("d3b7"),n("2b0e")),r=n("3a3d"),o=n("1315"),c=a["default"].extend({name:"User",data:function(){return{isLoading:!1,isCreating:!1,isSaving:!1,user:null}},computed:{users:function(){return this.$store.state.users.all}},filters:{date:function(t){return t?o["DateTime"].fromISO(t).setLocale("de").toLocaleString(o["DateTime"].DATETIME_MED):""}},created:function(){this.loadUser()},methods:{loadUser:function(){var t=this;this.isLoading=!0,this.$store.dispatch("users/load").catch((function(){t.$snotify.error("User konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createUser:function(){this.user=new r["a"],this.isCreating=!0},isEditMode:function(t){return this.user===t},addUser:function(){var t=this;this.isSaving=!0,this.$store.dispatch("users/add",this.user).then((function(){t.$snotify.success("Der Benutzer wurde hinzugefügt.")})).catch((function(){t.$snotify.error("Der Benutzer konnte nicht hinzugefügt werden!")})).finally((function(){t.isSaving=!1,t.isCreating=!1}))},editUser:function(t){this.user=t},updateUser:function(t){var e=this;this.isSaving=!0,this.$store.dispatch("users/update",t).then((function(){e.$snotify.success("Die Änderungen wurden gespeichert!")})).catch((function(){e.$snotify.error("Die Änderungen konnten nicht gespeichert werden!")})).finally((function(){e.isSaving=!1}))},revokePassword:function(t){var e=this;window.confirm("Soll das Passwort wirklich zurückgesetzt werden?")&&(this.isSaving=!0,this.$store.dispatch("users/revoke",t).then((function(){e.$snotify.success("Das Passwort wurde zurückgesetzt!")})).catch((function(){e.$snotify.error("Das Passwort konnte nicht zurückgesetzt werden!")})).finally((function(){e.isSaving=!1})))},deleteUser:function(t){var e=this;window.confirm("Soll der User wirklich gelöscht werden?")&&(this.isSaving=!0,this.$store.dispatch("users/delete",t).then((function(){e.$snotify.success("Der User wurde gelöscht!")})).catch((function(){e.$snotify.error("Der User konnte nicht gelöscht werden!")})).finally((function(){e.isSaving=!1})))},cancelEditMode:function(){this.user=null}}}),l=c,u=(n("1d4f"),n("2877")),d=Object(u["a"])(l,i,s,!1,null,"6766e910",null);e["default"]=d.exports},"1b91":function(t,e,n){"use strict";var i=n("6a3a"),s=n.n(i);s.a},"1d4f":function(t,e,n){"use strict";var i=n("b00e"),s=n.n(i);s.a},"4dcb":function(t,e,n){},"62b5":function(t,e,n){"use strict";var i=n("e11d"),s=n.n(i);s.a},"6a3a":function(t,e,n){},a2f9:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"news-container"},[n("div",{staticClass:"workspace"},[n("div",{staticClass:"main-content"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"mt-3"},[n("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:t.selectedNews},on:{click:t.createNews}},[t._v(" Erstellen ")]),n("button",{staticClass:"btn float-right",on:{click:function(e){t.showAll=!t.showAll}}},[t.showAll?n("span",[t._v("Nur aktive anzeigen")]):n("span",[t._v("Alle anzeigen")])]),n("h1",[t._v("News")])]),n("table",{staticClass:"table table-bordered table-sm"},[t._m(0),t.isLoading?n("tbody",[n("tr",[n("td",{attrs:{colspan:"5"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"spinner-border spinner-border-sm"}),t._v(" Newseinträge werden geladen ")])])]):0==t.news.length?n("tbody",[t._m(1)]):n("tbody",t._l(t.news,(function(e){return n("tr",{key:e.ID,class:{active:t.showAll&&!e.isExpired}},[n("td",[n("span",{staticClass:"no-break"},[t._v(" "+t._s(t._f("date")(e.date))+" ")])]),n("td",[n("span",{staticClass:"no-break"},[t._v(" "+t._s(t._f("date")(e.expirationDate))+" ")])]),n("td",[n("div",{staticClass:"text-truncate"},[t._v(" "+t._s(e.title)+" ")])]),n("td",[e.attachments&&0!=e.attachments.length?n("ul",{staticClass:"news-file-list"},t._l(e.attachments,(function(e){return n("li",{key:e.ID},[n("a",{attrs:{href:e.frontendPath}},[t._v(t._s(e.title))]),n("small",[t._v(t._s(e.readableFileSize))])])})),0):n("span",[t._v("-")])]),n("td",[n("div",{staticClass:"row-actions"},[n("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten"},on:{click:function(n){return t.editNews(e)}}},[n("i",{staticClass:"fa fa-edit"})]),n("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen"},on:{click:function(n){return t.deleteNews(e)}}},[n("i",{staticClass:"fa fa-trash"})])])])])})),0)])])])]),n("news-entry-form",{directives:[{name:"show",rawName:"v-show",value:t.selectedNews,expression:"selectedNews"}],attrs:{adminMode:t.isAdmin},on:{cancelForm:t.cancelNewsForm,onSubmissionStart:function(e){t.isSubmitting=!0},onSubmissionEnd:function(e){t.isSubmitting=!1},onSubmissionSuccess:t.onFormSubmissionSuccess,onSubmissionError:t.onFormSubmissionError}})],1)])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",{staticClass:"date",attrs:{scope:"col"}},[t._v("Datum")]),n("th",{staticClass:"date",attrs:{scope:"col"}},[t._v(" Gültig bis ")]),n("th",{attrs:{scope:"col"}},[t._v("Titel")]),n("th",{attrs:{scope:"col"}},[t._v("Dateien")]),n("th",{attrs:{scope:"col",width:"108"}})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{attrs:{colspan:"5"}},[t._v(" Im Moment sind keine News vorhanden. ")])])}],a=(n("4de4"),n("d3b7"),n("2b0e")),r=n("1315"),o=n("0758"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.newsEntry?n("div",{staticClass:"form-container"},[n("div",{staticClass:"form-background"}),n("div",{staticClass:"news-create"},[n("form",{staticClass:"container form",on:{submit:t.submitForm}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Titel")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.newsEntry.title,expression:"newsEntry.title"}],staticClass:"form-control form-control-sm",attrs:{type:"text","aria-describedby":"titelHelp",required:"",autofocus:""},domProps:{value:t.newsEntry.title},on:{input:function(e){e.target.composing||t.$set(t.newsEntry,"title",e.target.value)}}}),n("small",{staticClass:"form-text text-muted",attrs:{id:"titelHelp"}},[t._v(" Die Überschrift für den Newseintrag ")])]),n("div",{staticClass:"form-group form-row"},[n("div",{staticClass:"col"},[n("label",{attrs:{for:"date"}},[t._v("Datum")]),n("date-picker",{attrs:{"help-id":"dateHelp"},on:{change:t.checkExpirationDate},model:{value:t.newsEntry.date,callback:function(e){t.$set(t.newsEntry,"date",e)},expression:"newsEntry.date"}}),n("small",{staticClass:"form-text text-muted",attrs:{id:"dateHelp"}},[t._v(" Der News Eintrag wird ab diesem Datum angezeigt ")])],1),n("div",{staticClass:"col"},[n("label",{attrs:{for:"date"}},[t._v("Anzeigen bis")]),n("date-picker",{attrs:{minDate:t.newsEntry.date,"help-id":"expirationDateHelp",clearButton:"true"},model:{value:t.newsEntry.expirationDate,callback:function(e){t.$set(t.newsEntry,"expirationDate",e)},expression:"newsEntry.expirationDate"}}),n("small",{staticClass:"form-text text-muted",attrs:{id:"expirationDateHelp"}},[t._v(" Der News Eintrag wird ab diesem Datum angezeigt ")])],1)])]),n("div",{staticClass:"col-md-4"},[n("text-editor",{attrs:{enableSourceMode:t.adminMode&&!!t.adminMode},model:{value:t.newsEntry.text,callback:function(e){t.$set(t.newsEntry,"text",e)},expression:"newsEntry.text"}})],1),n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"file"}},[t._v("Dateien")]),t.newsEntry.attachments&&t.newsEntry.attachments.length>0?n("ul",{staticClass:"file-list"},t._l(t.newsEntry.attachments,(function(e){return n("li",{key:e.ID},[t._v(" "+t._s(e.title)+" "),n("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(n){return t.deleteFile(e)}}},[n("i",{staticClass:"fa fa-trash"})])])})),0):t._e(),t.newsEntry.id?n("file-input",{attrs:{route:t.attachmentRoute},on:{onUploadSuccessful:t.onUploadSuccessful,onUploadFailed:t.onUploadFailed}}):n("div",[n("small",[t._v("Dateien können erst hochgeladen werden, nachdem die News gespeichert wurde.")])])],1)])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn",attrs:{type:"button",disabled:t.isSubmitting},on:{click:t.cancelForm}},[t._v(" Abbrechen ")]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.isSubmitting}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isSubmitting,expression:"isSubmitting"}],staticClass:"spinner-border spinner-border-sm"}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSubmitting,expression:"!isSubmitting"}]},[t._v(" Speichern ")])])])])])])])]):t._e()},l=[],u=(n("99af"),n("60a3")),d=n("e94a"),p=n("0f29"),f=n("b1b6"),m=n("d70b"),h=u["a"].extend({name:"NewsEntryForm",props:["adminMode"],components:{DatePicker:d["a"],FileInput:f["a"],TextEditor:p["a"]},data:function(){return{isSubmitting:!1}},computed:{attachmentRoute:function(){return this.newsEntry.id?"".concat(m["a"].host,"/api/news/").concat(this.newsEntry.id,"/attach"):""},newsEntry:function(){return this.$store.state.news.selectedNews}},methods:{submitForm:function(t){var e=this;if(t.preventDefault(),!this.isSubmitting){this.isSubmitting=!0,this.$emit("onSubmissionStart",!0);var n=this.newsEntry.ID?"update":"create";this.$store.dispatch("news/".concat(n),this.newsEntry).then((function(){e.isCreating=!1,e.$emit("onSubmissionSuccess")})).catch((function(t){e.$emit("onSubmissionError",t)})).finally((function(){e.isSubmitting=!1,e.$emit("onSubmissionEnd",!1)}))}},cancelForm:function(){this.$emit("cancelForm")},checkExpirationDate:function(){var t=this.newsEntry,e=t.date,n=t.expirationDate;if(n&&e){var i=r["DateTime"].fromISO(e),s=r["DateTime"].fromISO(n);i>s&&(this.newsEntry.expirationDate=e)}},onUploadSuccessful:function(t){this.$store.dispatch("news/updateNews",o["a"].init(t[0])),this.$snotify.success("Upload erfolgreich")},onUploadFailed:function(t){this.$snotify.error("Beim Upload ist ein Fehler aufgetreten!")},deleteFile:function(t){var e=this;window.confirm('Soll die Datei "'.concat(t.title,'" wirklich gelöscht werden?'))&&this.$store.dispatch("news/deleteFile",{news:this.newsEntry,file:t}).then((function(){e.$snotify.success("Die Datei wurde gelöscht.")})).catch((function(){e.$snotify.error("Die Datei konnte nicht gelöscht werden!")}))}}}),v=h,b=(n("b724"),n("2877")),w=Object(b["a"])(v,c,l,!1,null,"4a33e21a",null),g=w.exports,y=a["default"].extend({components:{NewsEntryForm:g},name:"News",data:function(){return{isLoading:!1,isSubmitting:!1,showAll:!1}},computed:{news:function(){var t=this;return this.$store.state.news.all.filter((function(e){return t.showAll||!e.isExpired}))},selectedNews:function(){return this.$store.state.news.selectedNews},isAdmin:function(){return this.$store.state.auth.isAdmin()}},filters:{date:function(t){return t?r["DateTime"].fromISO(t).setLocale("de").toLocaleString(r["DateTime"].DATE_MED_WITH_WEEKDAY):""}},created:function(){this.loadNews()},methods:{loadNews:function(){var t=this;this.isLoading=!0,this.$store.dispatch("news/load").catch((function(){t.$snotify.error("News konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createNews:function(){this.$store.dispatch("news/select",new o["a"])},editNews:function(t){this.$store.dispatch("news/select",o["a"].init(t))},cancelNewsForm:function(){this.$store.dispatch("news/select",null)},deleteNews:function(t){var e=this;window.confirm("Soll der Eintrag wirklich gelöscht werden?")&&this.$store.dispatch("news/delete",t).then((function(){e.$snotify.success("News wurde gelöscht!")})).catch((function(){e.$snotify.error("News konnte nicht gelöscht werden!")}))},onFormSubmissionSuccess:function(){this.$snotify.success("News wurde gespeichert!"),this.$store.dispatch("news/select",null)},onFormSubmissionError:function(){this.$snotify.error("News konnte nicht gespeichert werden!")}}}),C=y,S=(n("62b5"),Object(b["a"])(C,i,s,!1,null,"f7bc253e",null));e["default"]=S.exports},b00e:function(t,e,n){},b724:function(t,e,n){"use strict";var i=n("4dcb"),s=n.n(i);s.a},c4a9:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var i=function(){return"undefined"!==typeof window?window:t},s=function(){var t=i();return t&&t.tinymce?t.tinymce:null}}).call(this,n("c8ba"))},e11d:function(t,e,n){},e94a:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-date-picker",{attrs:{attributes:t.attrs,value:t.selectedDate,"min-date":this.minDate,locale:"de","is-dark":"",popover:{placement:"bottom",visibility:"click"}},on:{input:function(e){return t.selectDate(e)}}},[n("div",{staticClass:"input-group"},[n("input",{staticClass:"form-control form-control-sm",attrs:{type:"text","aria-describedby":t.helpId,readonly:"",id:"date"},domProps:{value:t._f("date")(t.selectedDate)}}),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"}},[n("i",{staticClass:"fa fa-calendar"})]),t.clearButton?n("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:t.clearDate}},[n("i",{staticClass:"fa fa-ban"})]):t._e()])])])},s=[],a=n("60a3"),r=n("1315"),o=a["a"].extend({name:"DatePicker",model:{prop:"selectedDate",event:"change"},props:["selectedDate","helpId","minDate","clearButton"],data:function(){return{attrs:[]}},filters:{date:function(t){return t?r["DateTime"].fromISO(t).setLocale("de").toLocaleString(r["DateTime"].DATE_MED_WITH_WEEKDAY):""}},methods:{selectDate:function(t){var e=r["DateTime"].fromJSDate(t).toFormat("y-MM-dd");this.$emit("change",e)},clearDate:function(t){t.stopImmediatePropagation(),t.preventDefault(),this.$emit("change",null)}}}),c=o,l=n("2877"),u=Object(l["a"])(c,i,s,!1,null,null,null);e["a"]=u.exports}}]);
//# sourceMappingURL=news.d6fd588c.js.map