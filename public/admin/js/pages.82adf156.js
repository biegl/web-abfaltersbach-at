(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages"],{9723:function(t,e,i){},ae02:function(t,e,i){"use strict";var s=i("9723"),n=i.n(s);n.a},cd55:function(t,e,i){"use strict";var s=i("f572"),n=i.n(s);n.a},ee3e:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pages-container"},[i("div",{staticClass:"workspace"},[i("div",{staticClass:"main-content"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("div",{staticClass:"mt-3"},[i("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:t.selectedPage},on:{click:t.createPage}},[t._v(" Erstellen ")]),i("h1",[t._v("Seiten")])]),i("table",{staticClass:"table table-bordered table-sm"},[t._m(0),t.isLoading?i("tbody",[i("tr",[i("td",{attrs:{colspan:"3"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"spinner-border spinner-border-sm"}),t._v(" Seiten werden geladen ")])])]):0==t.pages.length?i("tbody",[t._m(1)]):i("tbody",t._l(t.pages,(function(e){return i("tr",{key:e.id},[i("td",[i("div",[t._v(t._s(e.seitentitel))])]),i("td",[e.attachments&&0!=e.attachments.length?i("ul",{staticClass:"pages-file-list"},t._l(e.attachments,(function(e){return i("li",{key:e.ID},[i("a",{attrs:{href:e.frontendPath}},[t._v(t._s(e.title))]),i("small",[t._v(t._s(e.readableFileSize))])])})),0):i("span",[t._v("-")])]),i("td",[i("div",{staticClass:"row-actions"},[i("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten"},on:{click:function(i){return t.editPage(e)}}},[i("i",{staticClass:"fa fa-edit"})]),i("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen"},on:{click:function(i){return t.deletePage(e)}}},[i("i",{staticClass:"fa fa-trash"})])])])])})),0)])])])]),i("page-entry-form",{directives:[{name:"show",rawName:"v-show",value:t.selectedPage,expression:"selectedPage"}],attrs:{adminMode:t.isAdmin},on:{cancelForm:t.cancelPageForm,onSubmissionStart:function(e){t.isSubmitting=!0},onSubmissionEnd:function(e){t.isSubmitting=!1},onSubmissionSuccess:t.onFormSubmissionSuccess,onSubmissionError:t.onFormSubmissionError}})],1)])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",{staticClass:"date",attrs:{scope:"col"}},[t._v("Titel")]),i("th",{staticClass:"date",attrs:{scope:"col"}},[t._v(" Dateien ")]),i("th",{attrs:{scope:"col",width:"108"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",{attrs:{colspan:"3"}},[t._v(" Keine Seiten vorhanden. ")])])}],a=(i("d3b7"),i("2b0e")),r=i("0255"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.pageEntry?i("div",{staticClass:"form-container"},[i("div",{staticClass:"form-background"}),i("div",{staticClass:"event-create"},[i("form",{staticClass:"container form",on:{submit:t.submitForm}},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-3"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Titel")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.pageEntry.seitentitel,expression:"pageEntry.seitentitel"}],staticClass:"form-control form-control-sm",attrs:{type:"text","aria-describedby":"titelHelp",required:"",autofocus:""},domProps:{value:t.pageEntry.seitentitel},on:{input:function(e){e.target.composing||t.$set(t.pageEntry,"seitentitel",e.target.value)}}}),i("small",{staticClass:"form-text text-muted",attrs:{id:"titelHelp"}},[t._v(" Die Überschrift der Seite ")])])]),i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Inhalt")]),t.adminMode&&t.adminMode?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pageEntry.inhalt,expression:"pageEntry.inhalt"}],staticClass:"form-control",attrs:{rows:"20"},domProps:{value:t.pageEntry.inhalt},on:{input:function(e){e.target.composing||t.$set(t.pageEntry,"inhalt",e.target.value)}}}):i("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.pageEntry.inhalt,callback:function(e){t.$set(t.pageEntry,"inhalt",e)},expression:"pageEntry.inhalt"}})],1)]),i("div",{staticClass:"col-md-3"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"file"}},[t._v("Dateien")]),t.pageEntry.attachments&&t.pageEntry.attachments.length>0?i("ul",{staticClass:"file-list"},t._l(t.pageEntry.attachments,(function(e){return i("li",{key:e.ID},[t._v(" "+t._s(e.title)+" "),i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(i){return t.deleteFile(e)}}},[i("i",{staticClass:"fa fa-trash"})])])})),0):t._e(),t.pageEntry.id?i("file-input",{attrs:{route:t.attachmentRoute},on:{onUploadSuccessful:t.onUploadSuccessful,onUploadFailed:t.onUploadFailed}}):i("div",[i("small",[t._v("Dateien können erst hochgeladen werden, nachdem die Veranstaltung gespeichert wurde.")])])],1)])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col text-right"},[i("button",{staticClass:"btn",attrs:{type:"button",disabled:t.isSubmitting},on:{click:t.cancelForm}},[t._v(" Abbrechen ")]),i("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.isSubmitting}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isSubmitting,expression:"isSubmitting"}],staticClass:"spinner-border spinner-border-sm"}),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSubmitting,expression:"!isSubmitting"}]},[t._v(" Speichern ")])])])])])])]):t._e()},c=[],l=(i("99af"),i("60a3")),d=i("fb3d"),u=i.n(d),m=(i("0e5a"),i("d70b")),p=i("b1b6"),h=l["a"].extend({name:"PageEntryForm",props:["adminMode"],components:{FileInput:p["a"]},data:function(){return{isSubmitting:!1,editor:u.a,editorConfig:{height:400,language:"de",toolbar:["bold","italic","|","bulletedList","numberedList","|","link"]}}},computed:{attachmentRoute:function(){return this.pageEntry.id?"".concat(m["a"].host,"/api/pages/").concat(this.pageEntry.id,"/attach"):""},pageEntry:function(){return this.$store.state.pages.selectedPage}},methods:{submitForm:function(t){var e=this;if(t.preventDefault(),!this.isSubmitting){this.isSubmitting=!0,this.$emit("onSubmissionStart",!0);var i=this.pageEntry.id?"update":"create";this.$store.dispatch("pages/".concat(i),this.pageEntry).then((function(){e.isCreating=!1,e.$emit("onSubmissionSuccess")})).catch((function(t){e.$emit("onSubmissionError",t)})).finally((function(){e.isSubmitting=!1,e.$emit("onSubmissionEnd",!1)}))}},cancelForm:function(){this.$emit("cancelForm")},onUploadSuccessful:function(t){this.$store.dispatch("pages/updatePage",r["a"].init(t[0])),this.$snotify.success("Upload erfolgreich")},onUploadFailed:function(){this.$snotify.error("Beim Upload ist ein Fehler aufgetreten!")},deleteFile:function(t){var e=this;window.confirm('Soll die Datei "'.concat(t.title,'" wirklich gelöscht werden?'))&&this.$store.dispatch("pages/deleteFile",{page:this.pageEntry,file:t}).then((function(){e.$snotify.success("Die Datei wurde gelöscht.")})).catch((function(){e.$snotify.error("Die Datei konnte nicht gelöscht werden!")}))}}}),f=h,g=(i("cd55"),i("ae02"),i("2877")),b=Object(g["a"])(f,o,c,!1,null,"2bc9754c",null),v=b.exports,y=i("0ff2"),S=a["default"].extend({components:{PageEntryForm:v},name:"Pages",data:function(){return{isLoading:!1,isSubmitting:!1}},computed:{pages:function(){return this.$store.state.pages.all},selectedPage:function(){return this.$store.state.pages.selectedPage},currentUser:function(){return this.$store.state.auth.user},isAdmin:function(){return this.currentUser&&this.currentUser.role===y["a"].Admin}},created:function(){this.loadPages()},methods:{loadPages:function(){var t=this;this.isLoading=!0,this.$store.dispatch("pages/load").catch((function(){t.$snotify.error("Die Seiten konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createPage:function(){this.$store.dispatch("pages/select",new r["a"])},editPage:function(t){this.$store.dispatch("pages/select",t)},cancelPageForm:function(){this.$store.dispatch("pages/select",null)},deletePage:function(t){var e=this;window.confirm("Soll die Seite wirklich gelöscht werden?")&&this.$store.dispatch("pages/delete",t).then((function(){e.$snotify.success("Die Seite wurde gelöscht!")})).catch((function(){e.$snotify.error("Die Seite konnte nicht gelöscht werden!")}))},onFormSubmissionSuccess:function(){this.$snotify.success("Die Seite wurde gespeichert!"),this.$store.dispatch("pages/select",null)},onFormSubmissionError:function(){this.$snotify.error("Die Seite konnte nicht gespeichert werden!")}}}),w=S,C=(i("efb2"),Object(g["a"])(w,s,n,!1,null,"25be3b15",null));e["default"]=C.exports},efb2:function(t,e,i){"use strict";var s=i("f923"),n=i.n(s);n.a},f572:function(t,e,i){},f923:function(t,e,i){}}]);
//# sourceMappingURL=pages.82adf156.js.map