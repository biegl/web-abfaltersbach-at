"use strict";(self["webpackChunkeasyadmin"]=self["webpackChunkeasyadmin"]||[]).push([[697],{234:function(t,e,n){n.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"form-group",attrs:{role:"group"}},[t.label?e("label",{attrs:{for:t.id},domProps:{innerHTML:t._s(t.label)}}):t._e(),e("v-date-picker",{attrs:{attributes:t.attrs,value:t.selectedDate,"min-date":t.minDate,locale:"de","is-dark":"",popover:{placement:"bottom",visibility:"click"}},on:{input:function(e){return t.selectDate(e)}},scopedSlots:t._u([{key:"default",fn:function({inputValue:n,inputEvents:s,togglePopover:a}){return[e("div",{staticClass:"input-group"},[e("input",t._g({staticClass:"form-control form-control-sm",attrs:{type:"text",readonly:"",id:t.id},domProps:{value:n}},s)),e("div",{staticClass:"input-group-append"},[t.clearButton?e("button",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Datum löschen",placement:"top-end"},expression:"{\n                            content: 'Datum löschen',\n                            placement: 'top-end',\n                        }"}],staticClass:"btn btn-outline-secondary btn-sm text-danger",attrs:{type:"button"},on:{click:t.clearDate}},[e("i",{staticClass:"fa fa-ban"})]):t._e(),e("button",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Kalender öffnen",placement:"top-end"},expression:"{\n                            content: 'Kalender öffnen',\n                            placement: 'top-end',\n                        }"}],staticClass:"btn btn-outline-secondary btn-sm text-primary",attrs:{type:"button"},on:{click:a}},[e("i",{staticClass:"fa fa-calendar"})])])])]}}])}),t.description?e("small",{staticClass:"form-text text-muted w-100",domProps:{innerHTML:t._s(t.description)}}):t._e()],1)},a=[],i=n(5334),r=n(9490),o=i.w3.extend({name:"DatePicker",model:{prop:"selectedDate",event:"change"},props:["label","selectedDate","minDate","clearButton","description"],data(){return{id:null,attrs:[]}},mounted(){this.id=this._uid},filters:{date:function(t){return t?r.ou.fromISO(t).setLocale("de").toLocaleString(r.ou.DATE_MED_WITH_WEEKDAY):""}},methods:{selectDate(t){const e=r.ou.fromJSDate(t).toFormat("y-MM-dd");this.$emit("change",e)},clearDate(t){t.stopImmediatePropagation(),t.preventDefault(),this.$emit("change",null)}}}),l=o,c=n(1001),d=(0,c.Z)(l,s,a,!1,null,null,null),u=d.exports},7489:function(t,e,n){n.d(e,{Z:function(){return u}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("CCard",[e("CCardBody",{staticClass:"position-relative"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"style-border"}),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"d-flex pl-3 pr-3",style:{flex:t.withEndDate?"0 0 140px":"0 0 70px"}},[e("div",{staticClass:"start-date"},[e("div",{staticClass:"event-day h3 mb-0"},[t._v(" "+t._s(t._f("day")(t.startDate))+" ")]),e("div",{staticClass:"event-month text-black-50"},[t._v(" "+t._s(t._f("month")(t.startDate))+" ")])]),t.endDate?e("div",{staticClass:"pl-3 pr-3 end-date"},[e("div",{staticClass:"event-day h3 mb-0"},[t._v(" "+t._s(t._f("day")(t.endDate))+" ")]),e("div",{staticClass:"event-month text-black-50"},[t._v(" "+t._s(t._f("month")(t.endDate))+" ")])]):t._e()]),e("div",{staticClass:"mr-3"},[e("div",{staticClass:"h5",domProps:{innerHTML:t._s(t.title)}}),e("div",{staticClass:"text-black-50",domProps:{innerHTML:t._s(t.content)}}),t.attachments&&t.attachments.length?e("ul",{staticClass:"list-unstyled"},t._l(t.attachments,(function(n){return e("li",{key:n.id,staticClass:"text-black-50 text-nowrap"},[e("CIcon",{staticClass:"mr-1",attrs:{name:"cil-file",size:"sm"}}),e("a",{staticClass:"text-black-50",attrs:{href:n.frontendPath,target:"_blank"}},[e("small",[t._v(t._s(n.title))])])],1)})),0):t._e()])]),e("div",{staticClass:"text-nowrap",staticStyle:{width:"80px"}},[e("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Bearbeiten",placement:"top-end"},expression:"{\n                        content: 'Bearbeiten',\n                        placement: 'top-end',\n                    }"}],staticClass:"btn",on:{click:function(e){return t.$emit("onEditItem")}}},[e("i",{staticClass:"fa fa-edit"})]),e("CLink",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Löschen",placement:"top-end"},expression:"{\n                        content: 'Löschen',\n                        placement: 'top-end',\n                    }"}],staticClass:"btn",attrs:{"aria-label":"Löschen"},on:{click:function(e){return t.$emit("onDeleteItem")}}},[e("i",{staticClass:"fa fa-trash"})])],1)])])],1)},a=[],i=n(538),r=n(9490),o=i["default"].extend({name:"ListEntryItem",props:["startDate","endDate","title","content","attachments","withEndDate"],filters:{day:function(t){return t?r.ou.fromISO(t).setLocale("de").toFormat("dd"):""},month:function(t){return t?r.ou.fromISO(t).setLocale("de").monthShort:""}}}),l=o,c=n(1001),d=(0,c.Z)(l,s,a,!1,null,"19c2ace6",null),u=d.exports},2455:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("CRow",[e("CCol",{attrs:{md:"8"}},[e("PageHeader",{attrs:{title:"News",icon:"cil-newspaper",route:{name:"news-add"}}}),t.isLoading?e("LoadingIndicator"):t._e(),!t.isLoading&&t.allNews?e("div",[t.allNews.data.length?t._e():e("EmptyListInfo"),t._l(t.allNews.data,(function(n){return e("ListEntryItem",{key:n.id,attrs:{startDate:n.date,endDate:n.expirationDate,withEndDate:!0,title:n.title,content:n.text,attachments:n.attachments},on:{onDeleteItem:function(e){return t.deleteNews(n)},onEditItem:function(e){return t.$router.push({name:"news-edit",params:{newsId:n.id}})}}})})),t.allNews.total>t.allNews.per_page?e("CPagination",{staticClass:"sticky-bottom",attrs:{activePage:t.activePage,pages:t.allNews.last_page,align:"center"},on:{"update:activePage":[function(e){t.activePage=e},t.updateActivePage],"update:active-page":function(e){t.activePage=e}}}):t._e()],2):t._e()],1),e("CCol",{attrs:{md:"4"}},[e("FilterContainer",{attrs:{resultsCount:t.resultsCount,isActive:"all"==t.selectedFilter},on:{reset:function(e){return t.updateFilter("active")}}},[e("CInputRadioGroup",{staticClass:"col-sm-9",attrs:{options:t.filterOptions,checked:t.selectedFilter},on:{"update:checked":t.updateFilter}})],1)],1)],1)},a=[],i=n(538),r=n(7489),o=n(3137),l=n(6811),c=n(3671),d=n(8077),u=i["default"].extend({name:"News",components:{EmptyListInfo:d.Z,FilterContainer:c.Z,ListEntryItem:r.Z,LoadingIndicator:l.Z,PageHeader:o.Z},data(){return{isLoading:!0,activePage:1,filterOptions:[{value:"active",label:"Aktive anzeigen"},{value:"all",label:"Alle anzeigen"}],selectedFilter:"active"}},computed:{allNews(){return this.$store.state.news.all},filteredNews(){const t="active"==this.selectedFilter?this.activeNews:this.allNews;return t},resultsCount(){return this.allNews?this.allNews.total:0}},created(){this.loadNews()},methods:{loadNews(){this.isLoading=!0,this.$store.dispatch("news/loadAll",{page:this.activePage,showAll:this.selectedFilter}).catch((()=>{this.$snotify.error("News konnten nicht geladen werden")})).finally((()=>{this.isLoading=!1}))},deleteNews(t){window.confirm("Soll der Eintrag wirklich gelöscht werden?")&&this.$store.dispatch("news/delete",t).then((()=>{this.$snotify.success("News wurde gelöscht!"),this.loadNews()})).catch((()=>{this.$snotify.error("News konnte nicht gelöscht werden!")}))},updateFilter(t){this.selectedFilter=t,this.loadNews()},updateActivePage(t){this.activePage=t,this.loadNews()}}}),m=u,p=n(1001),h=(0,p.Z)(m,s,a,!1,null,null,null),f=h.exports},9170:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("CRow",[e("CCol",{attrs:{md:"8"}},[e("CForm",{on:{submit:t.submitForm}},[e("CCard",[e("CCardHeader",[t._v(" News bearbeiten ")]),e("CCardBody",[e("CInput",{attrs:{description:"Die Überschrift für den Newseintrag",label:"Titel"},model:{value:t.newsEntry.title,callback:function(e){t.$set(t.newsEntry,"title",e)},expression:"newsEntry.title"}}),e("TextEditor",{attrs:{enableSourceMode:!!t.isAdmin},model:{value:t.newsEntry.text,callback:function(e){t.$set(t.newsEntry,"text",e)},expression:"newsEntry.text"}})],1),e("CCardFooter",{staticClass:"d-flex justify-content-end align-items-center"},[e("RouterLink",{staticClass:"mr-3 text-secondary",attrs:{to:{name:"news-overview"}}},[t._v(" Abbrechen ")]),e("CButton",{attrs:{type:"submit",color:"primary"}},[e("CIcon",{attrs:{name:"cil-check-circle"}}),t._v(" Speichern")],1)],1)],1)],1)],1),e("CCol",{attrs:{md:"4"}},[e("CCard",[e("CCardHeader",[e("CIcon",{staticClass:"text-secondary",attrs:{name:"cil-settings"}}),t._v(" Einstellungen ")],1),e("CCardBody",[e("CForm",[e("DatePicker",{attrs:{label:"Start Datum",description:"Der Eintrag wird ab diesem Datum angezeigt"},on:{change:t.checkExpirationDate},model:{value:t.newsEntry.date,callback:function(e){t.$set(t.newsEntry,"date",e)},expression:"newsEntry.date"}}),e("DatePicker",{attrs:{label:"Anzeige bis",minDate:t.newsEntry.date,clearButton:"true",description:"Der Eintrag wird bis zu diesem Datum angezeigt."},model:{value:t.newsEntry.expirationDate,callback:function(e){t.$set(t.newsEntry,"expirationDate",e)},expression:"newsEntry.expirationDate"}})],1)],1)],1),e("AttachmentsCard",{attrs:{modelFactory:t.modelFactory,attachmentRoute:t.attachmentRoute},model:{value:t.newsEntry.attachments,callback:function(e){t.$set(t.newsEntry,"attachments",e)},expression:"newsEntry.attachments"}})],1)],1)},a=[],i=n(5334),r=n(234),o=n(2124),l=n(1447),c=n(8584),d=n(9490),u=n(2379),m=i.w3.extend({name:"NewsEntryForm",components:{AttachmentsCard:l.Z,DatePicker:r.Z,TextEditor:o.Z},data(){return{isSubmitting:!1}},computed:{attachmentRoute(){return this.newsEntry.id?`${u.Z.host}/api/news/${this.newsEntry.id}/attach`:""},newsEntry(){return this.$store.state.news.selectedNews||new c.Z},isAdmin(){return this.$store.state.auth.isAdmin()}},mounted(){const t=this.$route.params.newsId;t?this.loadNews(t):this.$store.dispatch("news/select",new c.Z)},methods:{loadNews(t){this.$store.dispatch("news/loadOne",t)},submitForm(t){if(t.preventDefault(),this.isSubmitting)return;this.isSubmitting=!0;const e=this.newsEntry.id?"update":"create";this.$store.dispatch(`news/${e}`,this.newsEntry).then((()=>{this.$router.push({path:"/content/news/overview"})})).catch((()=>{this.$snotify.error("News konnte nicht gespeichert werden")})).finally((()=>{this.isSubmitting=!1}))},checkExpirationDate(){const{date:t,expirationDate:e}=this.newsEntry;if(!e||!t)return;const n=d.ou.fromISO(t),s=d.ou.fromISO(e);n>s&&(this.newsEntry.expirationDate=t)},modelFactory(t){return c.Z.init(t)}}}),p=m,h=n(1001),f=(0,h.Z)(p,s,a,!1,null,null,null),w=f.exports},4309:function(t,e,n){n.r(e),n.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("CRow",[e("CCol",{attrs:{md:"8"}},[e("PageHeader",{attrs:{title:"Settings",icon:"cil-settings"}}),e("CCard",[e("CCardBody",[t.isLoading?e("LoadingIndicator"):e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("label",{staticClass:"mb-0 ml-2",attrs:{for:"switch"}},[t._v("Link zum Wahlkartenantrag auf der Startseite anzeigen")]),e("CSwitch",{attrs:{id:"switch",color:"warning",shape:"pill",size:"sm","label-on":"on","label-off":"off",checked:t.settings.isProxyCardFeatureAvailable},on:{"update:checked":[function(e){return t.$set(t.settings,"isProxyCardFeatureAvailable",e)},t.updateSettings]}})],1)],1)],1),!t.isLoading&&t.settings?e("div"):t._e()],1)],1)},a=[],i=n(538),r=n(3137),o=n(6811),l=i["default"].extend({components:{PageHeader:r.Z,LoadingIndicator:o.Z},name:"Persons",data(){return{isLoading:!0,isSubmitting:!1}},computed:{settings(){return this.$store.state.settings}},created(){this.loadSettings()},methods:{loadSettings(){this.isLoading=!0,this.$store.dispatch("settings/load").catch((()=>{this.$snotify.error("Die Settings konnten nicht geladen werden")})).finally((()=>{this.isLoading=!1}))},updateSettings(){this.isSubmitting=!0,this.$store.dispatch("settings/update",this.settings).then((()=>{this.$snotify.success("Die Änderung wurde gespeichert!")})).catch((()=>{this.$snotify.error("Die Änderung konnte nicht gespeichert werden!")})).finally((()=>{this.isSubmitting=!1}))}}}),c=l,d=n(1001),u=(0,d.Z)(c,s,a,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=news.4c534b88.js.map