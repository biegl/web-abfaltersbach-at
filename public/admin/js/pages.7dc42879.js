(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages"],{"37bb":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CRow",[n("CCol",{attrs:{md:"8"}},[n("CForm",{on:{submit:t.submitForm}},[n("CCard",[n("CCardHeader",[t._v(" Seite bearbeiten ")]),n("CCardBody",[n("CInput",{attrs:{description:"Die Überschrift der Seite",label:"Titel"},model:{value:t.pageEntry.seitentitel,callback:function(e){t.$set(t.pageEntry,"seitentitel",e)},expression:"pageEntry.seitentitel"}}),n("TextEditor",{attrs:{enableSourceMode:!!t.isAdmin},model:{value:t.pageEntry.inhalt,callback:function(e){t.$set(t.pageEntry,"inhalt",e)},expression:"pageEntry.inhalt"}})],1),n("CCardFooter",{staticClass:"d-flex justify-content-end align-items-center"},[n("RouterLink",{staticClass:"mr-3 text-secondary",attrs:{to:{name:"pages-overview"}}},[t._v(" Abbrechen ")]),n("CButton",{attrs:{type:"submit",color:"primary"}},[n("CIcon",{attrs:{name:"cil-check-circle"}}),t._v(" Speichern")],1)],1)],1)],1)],1),n("CCol",{attrs:{md:"4"}},[n("AttachmentsCard",{attrs:{modelFactory:t.modelFactory,attachmentRoute:t.attachmentRoute},model:{value:t.pageEntry.attachments,callback:function(e){t.$set(t.pageEntry,"attachments",e)},expression:"pageEntry.attachments"}})],1)],1)},i=[],s=(n("99af"),n("d3b7"),n("60a3")),o=n("0255"),c=n("103d"),r=n("0f29"),l=n("d70b"),d=s["a"].extend({name:"PageEntryForm",components:{AttachmentsCard:c["a"],TextEditor:r["a"]},data:function(){return{isSubmitting:!1}},computed:{attachmentRoute:function(){return this.pageEntry.id?"".concat(l["a"].host,"/api/pages/").concat(this.pageEntry.id,"/attach"):""},pageEntry:function(){return this.$store.state.pages.selectedPage||new o["a"]},isAdmin:function(){return this.$store.state.auth.isAdmin()}},mounted:function(){var t=this.$route.params.pageId;t?this.loadPage(t):this.$store.dispatch("pages/select",new o["a"])},methods:{loadPage:function(t){this.$store.dispatch("pages/loadOne",t)},submitForm:function(t){var e=this;if(t.preventDefault(),!this.isSubmitting){this.isSubmitting=!0;var n=this.pageEntry.id?"update":"create";this.$store.dispatch("pages/".concat(n),this.pageEntry).then((function(){e.$router.push({path:"/content/pages/overview"})})).catch((function(){e.$snotify.error("Seite konnte nicht gespeichert werden")})).finally((function(){e.isSubmitting=!1}))}},modelFactory:function(t){return o["a"].init(t)}}}),u=d,g=n("2877"),p=Object(g["a"])(u,a,i,!1,null,null,null);e["default"]=p.exports},"45d7":function(t,e,n){},a6e2:function(t,e,n){"use strict";var a=n("45d7"),i=n.n(a);i.a},ac45:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CRow",[n("CCol",{attrs:{md:"8"}},[n("PageHeader",{attrs:{title:"Seiten",icon:"cil-notes",route:{name:"pages-add"}}}),t.isLoading?n("LoadingIndicator"):t._e(),!t.isLoading&&t.navigation?n("div",[t.navigation.data.length?t._e():n("EmptyListInfo"),t._l(t.navigation.data,(function(e){return n("div",{key:e.id,staticClass:"mb-4"},[n("PageNavigationItem",{class:{"d-none":!t.showAll&&!e.isVisible},attrs:{name:e.name,visible:e.isVisible,type:"parent"},on:{editPage:function(n){return t.editPage(e)},deletePage:function(n){return t.deletePage(e)}}}),t._l(e.children,(function(e){return n("PageNavigationItem",{key:e.id,class:{"d-none":!t.showAll&&!e.isVisible},attrs:{name:e.name,visible:e.isVisible,type:"child"},on:{editPage:function(n){return t.editPage(e)},deletePage:function(n){return t.deletePage(e)}}})}))],2)})),t.navigation.total>t.navigation.per_page?n("CPagination",{staticClass:"sticky-bottom",attrs:{activePage:t.activePage,pages:t.navigation.last_page,align:"center"},on:{"update:activePage":[function(e){t.activePage=e},t.updateActivePage],"update:active-page":function(e){t.activePage=e}}}):t._e()],2):t._e()],1),n("CCol",{attrs:{md:"4"}},[n("FilterContainer",{attrs:{resultsCount:t.resultsCount,isActive:t.showAll},on:{reset:function(e){return t.updateShowAll(!1)}}},[n("div",{staticClass:"d-flex align-items-center"},[n("CSwitch",{attrs:{id:"switch",color:"warning",shape:"pill",size:"sm","label-on":"on","label-off":"off",checked:t.showAll},on:{"update:checked":[function(e){t.showAll=e},t.updateShowAll]}}),n("label",{staticClass:"mb-0 ml-2",attrs:{for:"switch"}},[t._v("Alle anzeigen")])],1)])],1)],1)},i=[],s=(n("d3b7"),n("a026")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("CCard",{staticClass:"mb-1",class:{"not-visible":!t.visible}},[n("CCardBody",{staticClass:"pr-1",class:t.contentClass},[n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("div",{staticClass:"d-flex align-items-center"},[n("em",{class:t.circleClass}),"child"==t.type?n("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.name)+" ")]):n("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.name)+" ")])]),n("div",[t.visible?t._e():n("CIcon",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Die Seite ist nicht in der Navigation sichtbar",placement:"top-end"},expression:"{\n                        content:\n                            'Die Seite ist nicht in der Navigation sichtbar',\n                        placement: 'top-end',\n                    }"}],attrs:{name:"cil-low-vision"}}),n("button",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Seite bearbeiten",placement:"top-end"},expression:"{\n                        content: 'Seite bearbeiten',\n                        placement: 'top-end',\n                    }"}],staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.$emit("editPage",t.pageId)}}},[n("CIcon",{attrs:{name:"cil-pencil"}})],1),n("button",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Seite löschen",placement:"top-end"},expression:"{\n                        content: 'Seite löschen',\n                        placement: 'top-end',\n                    }"}],staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.$emit("deletePage",t.pageId)}}},[n("CIcon",{attrs:{name:"cil-trash"}})],1)],1)])])],1)},c=[],r=s["default"].extend({name:"PageNavigationItem",props:["name","type","pageId","visible"],computed:{contentClass:function(){return"child"===this.type?"pt-0 pb-0":""},circleClass:function(){var t="child"===this.type?"bg-info":"bg-warning";return"circle mr-2 ".concat(t)}}}),l=r,d=(n("a6e2"),n("2877")),u=Object(d["a"])(l,o,c,!1,null,"30189c79",null),g=u.exports,p=n("36ad"),h=n("1237"),m=n("b758"),f=n("1328"),v=s["default"].extend({name:"Pages",components:{EmptyListInfo:f["a"],FilterContainer:h["a"],LoadingIndicator:m["a"],PageNavigationItem:g,PageHeader:p["a"]},data:function(){return{isLoading:!0,showAll:!1,activePage:1}},computed:{navigation:function(){return this.$store.state.navigation.all},filters:function(){var t={page:this.activePage,showAll:this.showAll};return t},resultsCount:function(){return this.navigation?this.navigation.total:0}},created:function(){this.loadNavigation()},methods:{loadNavigation:function(){var t=this;this.isLoading=!0,this.$store.dispatch("navigation/loadAll",this.filters).catch((function(){t.$snotify.error("Die Navigation konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},editPage:function(t){this.$router.push({name:"pages-edit",params:{pageId:t.id}})},deletePage:function(t){var e=this;window.confirm("Soll die Seite wirklich gelöscht werden?")&&this.$store.dispatch("pages/delete",t).then((function(){e.$snotify.success("Die Seite wurde gelöscht!"),e.loadNavigation()})).catch((function(){e.$snotify.error("Die Seite konnte nicht gelöscht werden!")}))},updateShowAll:function(t){this.showAll=t,this.loadNavigation()},updateActivePage:function(t){this.activePage=t,this.loadNavigation()}}}),b=v,C=Object(d["a"])(b,a,i,!1,null,null,null);e["default"]=C.exports}}]);
//# sourceMappingURL=pages.7dc42879.js.map