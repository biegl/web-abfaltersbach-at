(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"0240":function(t,e,s){"use strict";var i=s("d295"),n=s.n(i);n.a},d295:function(t,e,s){},d843:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-container"},[s("div",{staticClass:"workspace"},[s("div",{staticClass:"main-content"},[s("div",{staticClass:"container"},[s("div",{staticClass:"container mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:t.isCreating},on:{click:t.createUser}},[t._v(" Erstellen ")]),s("h2",[t._v("Benutzerverwaltung")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("table",{staticClass:"table table-bordered table-sm mt-5"},[t._m(0),t.isLoading?s("tbody",[t._m(1)]):t._e(),t.isLoading?t._e():s("tbody",[t.isCreating?s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),s("td"),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"role",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"}},[t._v("User")]),s("option",{attrs:{value:"2"}},[t._v("Admin")])])]),s("td",[s("div",[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:t.isSaving},on:{click:function(e){return t.cancelCreate()}}},[s("i",{staticClass:"fa fa-times"})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:t.isSaving},on:{click:function(e){return t.addUser(t.user)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!t.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])])])]):t._e(),t._l(t.users,(function(e){return s("tr",{key:e.id},[s("td",[t.isEditMode(e)?s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"user.name"}],staticClass:"form-control",domProps:{value:e.name},on:{input:function(s){s.target.composing||t.$set(e,"name",s.target.value)}}}):s("span",[t._v(t._s(e.name))])]),s("td",[t.isEditMode(e)?s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"user.email"}],staticClass:"form-control",domProps:{value:e.email},on:{input:function(s){s.target.composing||t.$set(e,"email",s.target.value)}}}):s("a",{attrs:{href:"mailto:"+e.email}},[t._v(t._s(e.email))])]),s("td",[t._v(" "+t._s(t._f("date")(e.email_verified_at))+" ")]),s("td",[t.isEditMode(e)?s("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(s){var i=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"role",s.target.multiple?i:i[0])}}},[s("option",{attrs:{value:"1"}},[t._v("User")]),s("option",{attrs:{value:"2"}},[t._v("Admin")])]):s("div",[1===e.role?s("span",[t._v("User")]):2===e.role?s("span",[t._v("Admin")]):s("span",[t._v("-")])])]),s("td",[t.isEditMode(e)?s("div",{staticClass:"row-actions"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:t.isSaving},on:{click:function(s){return t.cancelEditMode(e)}}},[s("i",{staticClass:"fa fa-times"})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:t.isSaving},on:{click:function(s){return t.updateUser(e)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!t.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])]):s("div",{staticClass:"row-actions"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten",disabled:t.isSaving},on:{click:function(s){return t.editUser(e)}}},[s("i",{staticClass:"fa fa-edit"})]),s("button",{staticClass:"btn btn-warning",attrs:{type:"button","aria-label":"Passwort zurücksetzen",title:"Passwort zurücksetzen",disabled:t.isSaving},on:{click:function(s){return t.revokePassword(e)}}},[s("i",{staticClass:"fa fa-unlock-alt"})]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen",disabled:t.isSaving},on:{click:function(s){return t.deleteUser(e)}}},[s("i",{staticClass:"fa fa-trash"})])])])])}))],2)])])])])])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{attrs:{scope:"col"}},[t._v("Email")]),s("th",{attrs:{scope:"col"}},[t._v(" Email Verifiziert ")]),s("th",{attrs:{scope:"col"}},[t._v("Rolle")]),s("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{attrs:{colspan:"5"}},[s("span",{staticClass:"spinner-border spinner-border-sm"}),t._v(" Benutzer werden geladen ")])])}],a=(s("d3b7"),s("a026")),r=s("3a3d"),o=s("1315"),c=a["default"].extend({name:"User",data:function(){return{isLoading:!1,isCreating:!1,isSaving:!1,user:null}},computed:{users:function(){return this.$store.state.users.all}},filters:{date:function(t){return t?o["DateTime"].fromISO(t).setLocale("de").toLocaleString(o["DateTime"].DATETIME_MED):""}},created:function(){this.loadUser()},methods:{loadUser:function(){var t=this;this.isLoading=!0,this.$store.dispatch("users/load").catch((function(){t.$snotify.error("User konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createUser:function(){this.user=new r["a"],this.isCreating=!0},isEditMode:function(t){return this.user===t},addUser:function(){var t=this;this.isSaving=!0,this.$store.dispatch("users/add",this.user).then((function(){t.$snotify.success("Der Benutzer wurde hinzugefügt.")})).catch((function(){t.$snotify.error("Der Benutzer konnte nicht hinzugefügt werden!")})).finally((function(){t.isSaving=!1,t.isCreating=!1}))},editUser:function(t){this.user=t},updateUser:function(t){var e=this;this.isSaving=!0,this.$store.dispatch("users/update",t).then((function(){e.$snotify.success("Die Änderungen wurden gespeichert!")})).catch((function(){e.$snotify.error("Die Änderungen konnten nicht gespeichert werden!")})).finally((function(){e.isSaving=!1}))},revokePassword:function(t){var e=this;window.confirm("Soll das Passwort wirklich zurückgesetzt werden?")&&(this.isSaving=!0,this.$store.dispatch("users/revoke",t).then((function(){e.$snotify.success("Das Passwort wurde zurückgesetzt!")})).catch((function(){e.$snotify.error("Das Passwort konnte nicht zurückgesetzt werden!")})).finally((function(){e.isSaving=!1})))},deleteUser:function(t){var e=this;window.confirm("Soll der User wirklich gelöscht werden?")&&(this.isSaving=!0,this.$store.dispatch("users/delete",t).then((function(){e.$snotify.success("Der User wurde gelöscht!")})).catch((function(){e.$snotify.error("Der User konnte nicht gelöscht werden!")})).finally((function(){e.isSaving=!1})))},cancelEditMode:function(){this.user=null}}}),l=c,u=(s("0240"),s("2877")),d=Object(u["a"])(l,i,n,!1,null,"523385e6",null);e["default"]=d.exports}}]);
//# sourceMappingURL=user.2c750477.js.map