(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["news"],{1511:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-container"},[s("div",{staticClass:"workspace"},[s("div",{staticClass:"main-content"},[s("div",{staticClass:"container"},[s("div",{staticClass:"container mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:t.isCreating},on:{click:t.createUser}},[t._v(" Erstellen ")]),s("h2",[t._v("Benutzerverwaltung")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("table",{staticClass:"table table-bordered table-sm mt-5"},[t._m(0),t.isLoading?s("tbody",[t._m(1)]):t._e(),t.isLoading?t._e():s("tbody",[t.isCreating?s("tr",[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),s("td"),s("td",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.user.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"role",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"}},[t._v("User")]),s("option",{attrs:{value:"2"}},[t._v("Admin")])])]),s("td",[s("div",[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:t.isSaving},on:{click:function(e){return t.cancelCreate()}}},[s("i",{staticClass:"fa fa-times"})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:t.isSaving},on:{click:function(e){return t.addUser(t.user)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!t.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])])])]):t._e(),t._l(t.users,(function(e){return s("tr",{key:e.id},[s("td",[t.isEditMode(e)?s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"user.name"}],staticClass:"form-control",domProps:{value:e.name},on:{input:function(s){s.target.composing||t.$set(e,"name",s.target.value)}}}):s("span",[t._v(t._s(e.name))])]),s("td",[t.isEditMode(e)?s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"user.email"}],staticClass:"form-control",domProps:{value:e.email},on:{input:function(s){s.target.composing||t.$set(e,"email",s.target.value)}}}):s("a",{attrs:{href:"mailto:"+e.email}},[t._v(t._s(e.email))])]),s("td",[t._v(" "+t._s(e.email_verified_at)+" ")]),s("td",[t.isEditMode(e)?s("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"user.role"}],staticClass:"form-control",on:{change:function(s){var n=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"role",s.target.multiple?n:n[0])}}},[s("option",{attrs:{value:"1"}},[t._v("User")]),s("option",{attrs:{value:"2"}},[t._v("Admin")])]):s("div",[1===e.role?s("span",[t._v("User")]):2===e.role?s("span",[t._v("Admin")]):s("span",[t._v("-")])])]),s("td",[t.isEditMode(e)?s("div",[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Abbrechen",title:"Abbrechen",disabled:t.isSaving},on:{click:function(s){return t.cancelEditMode(e)}}},[s("i",{staticClass:"fa fa-times"})]),s("button",{staticClass:"btn btn-primary",attrs:{type:"button","aria-label":"Speichern",title:"Speichern",disabled:t.isSaving},on:{click:function(s){return t.updateUser(e)}}},[s("i",{directives:[{name:"show",rawName:"v-show",value:!t.isSaving,expression:"!isSaving"}],staticClass:"fa fa-check"}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isSaving,expression:"isSaving"}],staticClass:"spinner-border spinner-border-sm"})])]):s("div",[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten",disabled:t.isSaving},on:{click:function(s){return t.editUser(e)}}},[s("i",{staticClass:"fa fa-edit"})]),s("button",{staticClass:"btn btn-warning",attrs:{type:"button","aria-label":"Passwort zurücksetzen",title:"Passwort zurücksetzen",disabled:t.isSaving},on:{click:function(s){return t.revokePassword(e)}}},[s("i",{staticClass:"fa fa-unlock-alt"})]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen",disabled:t.isSaving},on:{click:function(s){return t.deleteUser(e)}}},[s("i",{staticClass:"fa fa-trash"})])])])])}))],2)])])])])])])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("Name")]),s("th",{attrs:{scope:"col"}},[t._v("Email")]),s("th",{attrs:{scope:"col"}},[t._v(" Email Verifiziert ")]),s("th",{attrs:{scope:"col"}},[t._v("Rolle")]),s("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{attrs:{colspan:"5"}},[s("span",{staticClass:"spinner-border spinner-border-sm"}),t._v(" Benutzer werden geladen ")])])}],a=(s("d3b7"),s("2b0e")),r=s("3a3d"),o=a["default"].extend({name:"User",data:function(){return{isLoading:!1,isCreating:!1,isSaving:!1,user:null}},computed:{users:function(){return this.$store.state.users.all}},created:function(){this.loadUser()},methods:{loadUser:function(){var t=this;this.isLoading=!0,this.$store.dispatch("users/load").catch((function(){t.$snotify.error("User konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createUser:function(){this.user=new r["a"],this.isCreating=!0},isEditMode:function(t){return this.user===t},addUser:function(){var t=this;this.isSaving=!0,this.$store.dispatch("users/add",this.user).then((function(){t.$snotify.success("Der Benutzer wurde hinzugefügt.")})).catch((function(){t.$snotify.error("Der Benutzer konnte nicht hinzugefügt werden!")})).finally((function(){t.isSaving=!1,t.isCreating=!1}))},editUser:function(t){this.user=t},updateUser:function(t){var e=this;this.isSaving=!0,this.$store.dispatch("users/update",t).then((function(){e.$snotify.success("Die Änderungen wurden gespeichert!")})).catch((function(){e.$snotify.error("Die Änderungen konnten nicht gespeichert werden!")})).finally((function(){e.isSaving=!1}))},revokePassword:function(t){var e=this;window.confirm("Soll das Passwort wirklich zurückgesetzt werden?")&&(this.isSaving=!0,this.$store.dispatch("users/revoke",t).then((function(){e.$snotify.success("Das Passwort wurde zurückgesetzt!")})).catch((function(){e.$snotify.error("Das Passwort konnte nicht zurückgesetzt werden!")})).finally((function(){e.isSaving=!1})))},deleteUser:function(t){var e=this;window.confirm("Soll der User wirklich gelöscht werden?")&&(this.isSaving=!0,this.$store.dispatch("users/delete",t).then((function(){e.$snotify.success("Der User wurde gelöscht!")})).catch((function(){e.$snotify.error("Der User konnte nicht gelöscht werden!")})).finally((function(){e.isSaving=!1})))},cancelEditMode:function(){this.user=null}}}),c=o,l=(s("7f91"),s("2877")),u=Object(l["a"])(c,n,i,!1,null,"50ed8f64",null);e["default"]=u.exports},2395:function(t,e,s){},4862:function(t,e,s){"use strict";var n=s("2395"),i=s.n(n);i.a},"641f":function(t,e,s){"use strict";var n=s("b21f"),i=s.n(n);i.a},"68a4":function(t,e,s){"use strict";var n=s("b57d"),i=s.n(n);i.a},"7f91":function(t,e,s){"use strict";var n=s("a554"),i=s.n(n);i.a},a2f9:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news-container"},[s("div",{staticClass:"workspace"},[s("div",{staticClass:"main-content"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"mt-3"},[s("button",{staticClass:"btn btn-primary float-right",attrs:{disabled:t.isCreating},on:{click:t.createNews}},[t._v(" Erstellen ")]),s("h1",[t._v("News")])]),s("table",{staticClass:"table table-bordered table-sm"},[t._m(0),t.isLoading?s("tbody",[s("tr",[s("td",{attrs:{colspan:"4"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"spinner-border spinner-border-sm"}),t._v(" Newseinträge werden geladen ")])])]):0==t.news.length?s("tbody",[t._m(1)]):s("tbody",t._l(t.news,(function(e){return s("tr",{key:e.ID},[s("td",[s("span",{staticClass:"no-break"},[t._v(" "+t._s(t._f("moment")(e.date))+" ")])]),s("td",[s("span",{staticClass:"no-break"},[t._v(" "+t._s(t._f("moment")(e.expirationDate))+" ")])]),s("td",[s("div",{staticClass:"text-truncate"},[t._v(" "+t._s(e.title)+" ")])]),s("td",[s("button",{staticClass:"btn btn-default",attrs:{type:"button","aria-label":"Bearbeiten",title:"Bearbeiten"},on:{click:function(s){return t.editNews(e)}}},[s("i",{staticClass:"fa fa-edit"})]),s("button",{staticClass:"btn btn-danger",attrs:{type:"button","aria-label":"Löschen",title:"Löschen"},on:{click:function(s){return t.deleteNews(e)}}},[s("i",{staticClass:"fa fa-trash"})])])])})),0)])])])]),s("news-entry-form",{directives:[{name:"show",rawName:"v-show",value:t.isCreating,expression:"isCreating"}],attrs:{bus:t.eventBus},on:{cancelForm:t.cancelNewsForm,onSubmissionStart:function(e){t.isSubmitting=!0},onSubmissionEnd:function(e){t.isSubmitting=!1},onSubmissionSuccess:t.onFormSubmissionSuccess,onSubmissionError:t.onFormSubmissionError}})],1)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"date",attrs:{scope:"col"}},[t._v("Datum")]),s("th",{staticClass:"date",attrs:{scope:"col"}},[t._v(" Gültig bis ")]),s("th",{attrs:{scope:"col"}},[t._v("Titel")]),s("th",{attrs:{scope:"col",width:"108"}})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",{attrs:{colspan:"4"}},[t._v(" Im Moment sind keine News vorhanden. ")])])}],a=(s("d3b7"),s("2b0e")),r=s("c1df"),o=s.n(r),c=s("0758"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-container"},[s("div",{staticClass:"form-background"}),s("div",{staticClass:"news-create"},[s("form",{staticClass:"container form",on:{submit:t.submitForm}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Titel")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newsEntry.title,expression:"newsEntry.title"}],staticClass:"form-control form-control-sm",attrs:{type:"text","aria-describedby":"titelHelp",required:"",autofocus:""},domProps:{value:t.newsEntry.title},on:{input:function(e){e.target.composing||t.$set(t.newsEntry,"title",e.target.value)}}}),s("small",{staticClass:"form-text text-muted",attrs:{id:"titelHelp"}},[t._v(" Die Überschrift für den Newseintrag ")])]),s("div",{staticClass:"form-group form-row"},[s("div",{staticClass:"col"},[s("label",{attrs:{for:"date"}},[t._v("Datum")]),s("date-picker",{attrs:{"help-id":"dateHelp"},on:{change:t.checkExpirationDate},model:{value:t.newsEntry.date,callback:function(e){t.$set(t.newsEntry,"date",e)},expression:"newsEntry.date"}}),s("small",{staticClass:"form-text text-muted",attrs:{id:"dateHelp"}},[t._v(" Der News Eintrag wird ab diesem Datum angezeigt ")])],1),s("div",{staticClass:"col"},[s("label",{attrs:{for:"date"}},[t._v("Anzeigen bis")]),s("date-picker",{attrs:{minDate:t.newsEntry.date,"help-id":"expirationDateHelp",clearButton:"true"},model:{value:t.newsEntry.expirationDate,callback:function(e){t.$set(t.newsEntry,"expirationDate",e)},expression:"newsEntry.expirationDate"}}),s("small",{staticClass:"form-text text-muted",attrs:{id:"expirationDateHelp"}},[t._v(" Der News Eintrag wird ab diesem Datum angezeigt ")])],1)])]),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Text")]),s("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.newsEntry.text,callback:function(e){t.$set(t.newsEntry,"text",e)},expression:"newsEntry.text"}})],1),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn",attrs:{type:"button",disabled:t.isSubmitting},on:{click:t.cancelForm}},[t._v(" Abbrechen ")]),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.isSubmitting}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.isSubmitting,expression:"isSubmitting"}],staticClass:"spinner-border spinner-border-sm"}),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isSubmitting,expression:"!isSubmitting"}]},[t._v(" Speichern ")])])])])])])])])},u=[],d=s("60a3"),m=s("fb3d"),f=s.n(m),v=(s("0e5a"),s("e94a")),p=d["a"].extend({name:"NewsEntryForm",props:["bus"],components:{DatePicker:v["a"]},data:function(){return{isSubmitting:!1,newsEntry:new c["a"],editor:f.a,editorConfig:{height:400,language:"de",toolbar:["bold","italic","|","bulletedList","numberedList","|","link"]}}},mounted:function(){this.bus.$on("edit",this.edit)},methods:{submitForm:function(t){var e=this;if(t.preventDefault(),!this.isSubmitting){this.isSubmitting=!0,this.$emit("onSubmissionStart",!0);var s=this.newsEntry.ID?"update":"create";this.$store.dispatch("news/".concat(s),this.newsEntry).then((function(){e.isCreating=!1,e.$emit("onSubmissionSuccess")})).catch((function(t){e.$emit("onSubmissionError",t)})).finally((function(){e.isSubmitting=!1,e.$emit("onSubmissionEnd",!1)}))}},edit:function(t){this.newsEntry=c["a"].init(t)},cancelForm:function(){this.$emit("cancelForm")},checkExpirationDate:function(){var t=this.newsEntry,e=t.date,s=t.expirationDate;if(s&&e){var n=o()(e),i=o()(s);n>i&&(this.newsEntry.expirationDate=e)}}}}),b=p,h=(s("68a4"),s("4862"),s("2877")),g=Object(h["a"])(b,l,u,!1,null,"e442fe30",null),w=g.exports,C=a["default"].extend({components:{NewsEntryForm:w},name:"News",data:function(){return{isLoading:!1,isCreating:!1,isSubmitting:!1,eventBus:new a["default"]}},computed:{news:function(){return this.$store.state.news.all}},filters:{moment:function(t){return t?o()(t).format("DD. MMMM YYYY"):""}},created:function(){this.loadNews()},methods:{loadNews:function(){var t=this;this.isLoading=!0,this.$store.dispatch("news/load").catch((function(){t.$snotify.error("News konnten nicht geladen werden")})).finally((function(){t.isLoading=!1}))},createNews:function(){this.isCreating=!0,this.eventBus.$emit("edit",new c["a"])},editNews:function(t){this.isCreating=!0,this.eventBus.$emit("edit",t)},cancelNewsForm:function(){this.isCreating=!1},deleteNews:function(t){var e=this;window.confirm("Soll der Eintrag wirklich gelöscht werden?")&&this.$store.dispatch("news/delete",t).then((function(){e.$snotify.success("News wurde gelöscht!")})).catch((function(){e.$snotify.error("News konnte nicht gelöscht werden!")}))},onFormSubmissionSuccess:function(){this.$snotify.success("News wurde gespeichert!"),this.isCreating=!1},onFormSubmissionError:function(){this.$snotify.error("News konnte nicht gespeichert werden!"),this.isCreating=!1}}}),y=C,_=(s("641f"),Object(h["a"])(y,n,i,!1,null,"0686af5c",null));e["default"]=_.exports},a554:function(t,e,s){},b21f:function(t,e,s){},b57d:function(t,e,s){},e94a:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-date-picker",{attrs:{attributes:t.attrs,value:t.selectedDate,"min-date":this.minDate,locale:"de","is-dark":"",popover:{placement:"bottom",visibility:"click"}},on:{input:function(e){return t.selectDate(e)}}},[s("div",{staticClass:"input-group"},[s("input",{staticClass:"form-control form-control-sm",attrs:{type:"text","aria-describedby":t.helpId,readonly:"",id:"date"},domProps:{value:t._f("moment")(t.selectedDate)}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"}},[s("i",{staticClass:"fa fa-calendar"})]),t.clearButton?s("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:t.clearDate}},[s("i",{staticClass:"fa fa-ban"})]):t._e()])])])},i=[],a=s("60a3"),r=s("c1df"),o=s.n(r),c=a["a"].extend({name:"DatePicker",model:{prop:"selectedDate",event:"change"},props:["selectedDate","helpId","minDate","clearButton"],data:function(){return{attrs:[]}},filters:{moment:function(t){return t?o()(t).format("DD. MMMM YYYY"):""}},methods:{selectDate:function(t){var e=o()(t).format("YYYY-MM-DD");this.$emit("change",e)},clearDate:function(t){t.stopImmediatePropagation(),t.preventDefault(),this.$emit("change",null)}}}),l=c,u=s("2877"),d=Object(u["a"])(l,n,i,!1,null,null,null);e["a"]=d.exports}}]);
//# sourceMappingURL=news.5cb843c9.js.map