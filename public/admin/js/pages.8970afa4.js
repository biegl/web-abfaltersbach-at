"use strict";(self["webpackChunkeasyadmin"]=self["webpackChunkeasyadmin"]||[]).push([[107],{3793:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("CRow",[e("CCol",{attrs:{md:"8"}},[e("CForm",{on:{submit:t.submitForm}},[e("CCard",[e("CCardHeader",[t._v(" Seite bearbeiten ")]),e("CCardBody",[e("CInput",{attrs:{description:"Die Überschrift der Seite",label:"Titel"},model:{value:t.pageEntry.seitentitel,callback:function(e){t.$set(t.pageEntry,"seitentitel",e)},expression:"pageEntry.seitentitel"}}),e("TextEditor",{attrs:{enableSourceMode:!!t.isAdmin},model:{value:t.pageEntry.inhalt,callback:function(e){t.$set(t.pageEntry,"inhalt",e)},expression:"pageEntry.inhalt"}})],1),e("CCardFooter",{staticClass:"d-flex justify-content-end align-items-center"},[e("RouterLink",{staticClass:"mr-3 text-secondary",attrs:{to:{name:"pages-overview"}}},[t._v(" Abbrechen ")]),e("CButton",{attrs:{type:"submit",color:"primary"}},[e("CIcon",{attrs:{name:"cil-check-circle"}}),t._v(" Speichern")],1)],1)],1)],1)],1),e("CCol",{attrs:{md:"4"}},[e("AttachmentsCard",{attrs:{modelFactory:t.modelFactory,attachmentRoute:t.attachmentRoute},model:{value:t.pageEntry.attachments,callback:function(e){t.$set(t.pageEntry,"attachments",e)},expression:"pageEntry.attachments"}})],1)],1)},n=[],s=i(5334),o=i(5051),r=i(1447),l=i(2124),c=i(2379),d=s.w3.extend({name:"PageEntryForm",components:{AttachmentsCard:r.Z,TextEditor:l.Z},data(){return{isSubmitting:!1}},computed:{attachmentRoute(){return this.pageEntry.id?`${c.Z.host}/api/pages/${this.pageEntry.id}/attach`:""},pageEntry(){return this.$store.state.pages.selectedPage||new o.Z},isAdmin(){return this.$store.state.auth.isAdmin()}},mounted(){const t=this.$route.params.pageId;t?this.loadPage(t):this.$store.dispatch("pages/select",new o.Z)},methods:{loadPage(t){this.$store.dispatch("pages/loadOne",t)},submitForm(t){if(t.preventDefault(),this.isSubmitting)return;this.isSubmitting=!0;const e=this.pageEntry.id?"update":"create";this.$store.dispatch(`pages/${e}`,this.pageEntry).then((()=>{this.$router.push({path:"/content/pages/overview"})})).catch((()=>{this.$snotify.error("Seite konnte nicht gespeichert werden")})).finally((()=>{this.isSubmitting=!1}))},modelFactory(t){return o.Z.init(t)}}}),u=d,p=i(1001),g=(0,p.Z)(u,a,n,!1,null,null,null),h=g.exports},5494:function(t,e,i){i.r(e),i.d(e,{default:function(){return y}});var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("CRow",[e("CCol",{attrs:{md:"8"}},[e("PageHeader",{attrs:{title:"Seiten",icon:"cil-notes",route:{name:"pages-add"}}}),t.isLoading?e("LoadingIndicator"):t._e(),!t.isLoading&&t.navigation?e("div",[t.navigation.data.length?t._e():e("EmptyListInfo"),t._l(t.navigation.data,(function(i){return e("div",{key:i.id,staticClass:"mb-4"},[e("PageNavigationItem",{class:{"d-none":!t.showAll&&!i.isVisible},attrs:{name:i.name,visible:i.isVisible,type:"parent"},on:{editPage:function(e){return t.editPage(i)},deletePage:function(e){return t.deletePage(i)}}}),t._l(i.children,(function(i){return e("PageNavigationItem",{key:i.id,class:{"d-none":!t.showAll&&!i.isVisible},attrs:{name:i.name,visible:i.isVisible,type:"child"},on:{editPage:function(e){return t.editPage(i)},deletePage:function(e){return t.deletePage(i)}}})}))],2)})),t.navigation.total>t.navigation.per_page?e("CPagination",{staticClass:"sticky-bottom",attrs:{activePage:t.activePage,pages:t.navigation.last_page,align:"center"},on:{"update:activePage":[function(e){t.activePage=e},t.updateActivePage],"update:active-page":function(e){t.activePage=e}}}):t._e()],2):t._e()],1),e("CCol",{attrs:{md:"4"}},[e("FilterContainer",{attrs:{resultsCount:t.resultsCount,isActive:t.showAll},on:{reset:function(e){return t.updateShowAll(!1)}}},[e("div",{staticClass:"d-flex align-items-center"},[e("CSwitch",{attrs:{id:"switch",color:"warning",shape:"pill",size:"sm","label-on":"on","label-off":"off",checked:t.showAll},on:{"update:checked":[function(e){t.showAll=e},t.updateShowAll]}}),e("label",{staticClass:"mb-0 ml-2",attrs:{for:"switch"}},[t._v("Alle anzeigen")])],1)])],1)],1)},n=[],s=i(538),o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("CCard",{staticClass:"mb-1",class:{"not-visible":!t.visible}},[e("CCardBody",{staticClass:"pr-1",class:t.contentClass},[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",{staticClass:"d-flex align-items-center"},[e("em",{class:t.circleClass}),"child"==t.type?e("h6",{staticClass:"mb-0"},[t._v(" "+t._s(t.name)+" ")]):e("h5",{staticClass:"mb-0"},[t._v(" "+t._s(t.name)+" ")])]),e("div",[t.visible?t._e():e("CIcon",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Die Seite ist nicht in der Navigation sichtbar",placement:"top-end"},expression:"{\n                        content:\n                            'Die Seite ist nicht in der Navigation sichtbar',\n                        placement: 'top-end',\n                    }"}],attrs:{name:"cil-low-vision"}}),e("button",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Seite bearbeiten",placement:"top-end"},expression:"{\n                        content: 'Seite bearbeiten',\n                        placement: 'top-end',\n                    }"}],staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.$emit("editPage",t.pageId)}}},[e("CIcon",{attrs:{name:"cil-pencil"}})],1),e("button",{directives:[{name:"c-tooltip",rawName:"v-c-tooltip",value:{content:"Seite löschen",placement:"top-end"},expression:"{\n                        content: 'Seite löschen',\n                        placement: 'top-end',\n                    }"}],staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.$emit("deletePage",t.pageId)}}},[e("CIcon",{attrs:{name:"cil-trash"}})],1)],1)])])],1)},r=[],l=s["default"].extend({name:"PageNavigationItem",props:["name","type","pageId","visible"],computed:{contentClass(){return"child"===this.type?"pt-0 pb-0":""},circleClass(){const t="child"===this.type?"bg-info":"bg-warning";return`circle mr-2 ${t}`}}}),c=l,d=i(1001),u=(0,d.Z)(c,o,r,!1,null,"30189c79",null),p=u.exports,g=i(3137),h=i(3671),m=i(6811),v=i(8077),f=s["default"].extend({name:"Pages",components:{EmptyListInfo:v.Z,FilterContainer:h.Z,LoadingIndicator:m.Z,PageNavigationItem:p,PageHeader:g.Z},data(){return{isLoading:!0,showAll:!1,activePage:1}},computed:{navigation(){return this.$store.state.navigation.all},filters(){const t={page:this.activePage,showAll:this.showAll};return t},resultsCount(){return this.navigation?this.navigation.total:0}},created(){this.loadNavigation()},methods:{loadNavigation(){this.isLoading=!0,this.$store.dispatch("navigation/loadAll",this.filters).catch((()=>{this.$snotify.error("Die Navigation konnten nicht geladen werden")})).finally((()=>{this.isLoading=!1}))},editPage(t){this.$router.push({name:"pages-edit",params:{pageId:t.id}})},deletePage(t){window.confirm("Soll die Seite wirklich gelöscht werden?")&&this.$store.dispatch("pages/delete",t).then((()=>{this.$snotify.success("Die Seite wurde gelöscht!"),this.loadNavigation()})).catch((()=>{this.$snotify.error("Die Seite konnte nicht gelöscht werden!")}))},updateShowAll(t){this.showAll=t,this.loadNavigation()},updateActivePage(t){this.activePage=t,this.loadNavigation()}}}),C=f,b=(0,d.Z)(C,a,n,!1,null,null,null),y=b.exports}}]);
//# sourceMappingURL=pages.8970afa4.js.map